function eventEvaluation(stringCode){"use strict";var event,e=this;eval(stringCode)}function httpRequest(n,t,i,r){this.contentType=r;this.request=new XMLHttpRequest;this.request.open(t,n,i);this.request.withCredentials=!1;r&&this.request.setRequestHeader("Content-Type",r);this.request.onload=function(){var n,t;this.status>=200&&this.status<400?(n=this.responseText,n&&(t=this.getResponseHeader("content-type"),t.indexOf("json")!==-1&&(n=JSON.parse(n))),this.successFn&&this.successFn(n)):this.errorFn&&this.errorFn(this)};this.request.onerror=function(n){this.errorFn&&this.errorFn(n)}}function httpController(n,t){for((n===undefined||t===undefined)&&console.log("error"),this.isLocalhost=n.indexOf("localhost")>-1,this.baseUrl=n,n[n.length]==="/"&&(this.baseUrl=this.baseUrl.substring(0,this.baseUrl.length-1)),this.controller=t;this.controller.indexOf("/")>-1;)this.controller=t.replace("/","");this.completeUrl=this.baseUrl+"/"+this.controller}function dispatcherEvent(n){this.eventName=n;this.callbacks=[]}function dispatcher(){this.events={}}function UnitedStatesProvider(){}function AustraliaProvider(){}function CanadaProvider(){}function MergeTag(){this.valid=!1;this.defaultValue=""}function CustomField(){this.controls=[]}function CustomQuestion(n,t){this.open=!1;this.valid=!1;this.totalChecked=0;this.placement=t.placement;this.container=n;this.fieldId=this.container.id.replace("twy-customquestion-","");this.isCfBindValue=!1;this.dispatcher=new dispatcher;this.mapInput();twyne.utils.hideElement(this.container)}function Offer(n,t){this.placement=t;this.id=n.Campaignid;this.isLinkout=n.Linkout;this.displayId=n.ModelId;this.hasPreping=n.Preping;this.clickId=n.ClickDataId;this.associatedOffers=n.AssociatedOffers;this.dispatcher=new dispatcher;this.mapContainer();this.defineInitialStatus(n.Fetched);this.mapMoreInfo();this.mapTcpa();this.mapButtons();this.mapCqs();this.mapHiddenCqs();this.mapInputType();this.cqs&&(this.cqsName=Object.keys(this.cqs));twyne.offerAddressValidation.validateAddress(this);this.hide();this.http={print:{},accept:{},preping:{},fetching:!1}}function PrivacyModal(n){this.mapModal(n);this.startModal()}function Placement(n,t,i){this.id=n;this.seed=i;this.element=t;this.dispatcher=new dispatcher;this.containerId="twy-placement-"+n;this.timeline=[];this.config={};this.mapDomEvents()}function Stack(n){this.placement=n}function SingleOffer(n){this.maxOffers=0;this.servedOffers={};this.currentOfferIndex=0;this.placement=n;this.offersOnScreen=!1;this.hasProgressInfo=!1;this.offerProgressInfo={};this.showClass=this.setShowTransitionClass();this.hideClass=this.setHideTransitionClass()}function executePreping(n,t,i,r,u){if(i>=r||t.prepings.length<=i)return u();var f=t.prepings[i];f.status===twyne.offerTypes.Associated?executePreping(n,t,i+1,r,u):f.tryComplete(!1,function(){executePreping(n,t,i+1,r,u)})}function Consumer(){this.id=0;this.initialized=!1;this.dispatcher=new dispatcher;this.addressFields=["address1","address2","city","state","zip"]}!function(n,t){"function"==typeof define&&define.amd?define(t):n.VMasker=t()}(this,function(){var i="9",r="A",u="S",f=[8,9,16,17,18,36,37,38,39,40,91,92,93],o=function(n){for(var t=0,i=f.length;i>t;t++)if(n==f[t])return!1;return!0},e=function(n){return n=n||{},n={precision:n.hasOwnProperty("precision")?n.precision:2,separator:n.separator||",",delimiter:n.delimiter||".",unit:n.unit&&n.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:n.suffixUnit&&" "+n.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:n.zeroCents,lastOutput:n.lastOutput},n.moneyPrecision=n.zeroCents?0:n.precision,n},n=function(n){this.elements=n},t;return n.prototype.unbindElementToMask=function(){for(var n=0,t=this.elements.length;t>n;n++)this.elements[n].lastOutput="",this.elements[n].onkeyup=!1,this.elements[n].onkeydown=!1,this.elements[n].value.length&&(this.elements[n].value=this.elements[n].value.replace(/\D/g,""))},n.prototype.bindElementToMask=function(n){for(var r=this,u=function(i){i=i||window.event;var u=i.target||i.srcElement;o(i.keyCode)&&setTimeout(function(){r.opts.lastOutput=u.lastOutput;u.value=t[n](u.value,r.opts);u.lastOutput=u.value;u.setSelectionRange&&r.opts.suffixUnit&&u.setSelectionRange(u.value.length,u.value.length-r.opts.suffixUnit.length)},0)},i=0,f=this.elements.length;f>i;i++)this.elements[i].lastOutput="",this.elements[i].onkeyup=u,this.elements[i].value.length&&(this.elements[i].value=t[n](this.elements[i].value,this.opts))},n.prototype.maskMoney=function(n){this.opts=e(n);this.bindElementToMask("toMoney")},n.prototype.maskNumber=function(){this.opts={};this.bindElementToMask("toNumber")},n.prototype.maskPattern=function(n){this.opts={pattern:n};this.bindElementToMask("toPattern")},n.prototype.unMask=function(){this.unbindElementToMask()},t=function(t){if(!t)throw new Error("VanillaMasker: There is no element to bind.");var i="length"in t?t.length?t:[]:[t];return new n(i)},t.toMoney=function(n,t){var u,s,l;if(t=e(t),t.zeroCents){t.lastOutput=t.lastOutput||"";var a="("+t.separator+"[0]{0,"+t.precision+"})",v=new RegExp(a,"g"),y=n.toString().replace(/[\D]/g,"").length||0,p=t.lastOutput.toString().replace(/[\D]/g,"").length||0;n=n.toString().replace(v,"");p>y&&(n=n.slice(0,n.length-1))}var f=n.toString().replace(/[\D]/g,""),w=new RegExp("^(0|\\"+t.delimiter+")"),b=new RegExp("(\\"+t.separator+")$"),i=f.substr(0,f.length-t.moneyPrecision),r=i.substr(0,i.length%3),o=new Array(t.precision+1).join("0");for(i=i.substr(i.length%3,i.length),u=0,s=i.length;s>u;u++)u%3==0&&(r+=t.delimiter),r+=i[u];if(r=r.replace(w,""),r=r.length?r:"0",!t.zeroCents){var k=f.length-t.precision,h=f.substr(k,t.precision),c=h.length,d=t.precision>c?t.precision:c;o=(o+h).slice(-d)}return l=t.unit+r+t.separator+o+t.suffixUnit,l.replace(b,"")},t.toPattern=function(n,t){for(var h="object"==typeof t?t.pattern:t,c=h.replace(/\W/g,""),e=h.split(""),o=n.toString().replace(/\W/g,""),l=o.replace(/\W/g,""),s=0,a=e.length,f=0;a>f;f++){if(s>=o.length){if(c.length==l.length)return e.join("");break}e[f]===i&&o[s].match(/[0-9]/)||e[f]===r&&o[s].match(/[a-zA-Z]/)||e[f]===u&&o[s].match(/[0-9a-zA-Z]/)?e[f]=o[s++]:(e[f]===i||e[f]===r||e[f]===u)&&(e=e.slice(0,f))}return e.join("").substr(0,f)},t.toNumber=function(n){return n.toString().replace(/(?!^-)[^0-9]/g,"")},t});Object.defineProperty(window,"twyne",{writable:!1,enumerable:!1,configurable:!1,value:function(){"use strict";document.addEventListener("DOMContentLoaded",function(){twyne.loadPlacements()});window.addEventListener("beforeunload",function(){var r,n,u,t,i;for(r in twyne.placements)twyne.placements[r].logHistory();if(twyne&&!twyne.finished&&!twyne.isFormRegistration){n={leadId:twyne.getLeadId(),trustedForm:twyne.getTrustedForm(),url:window.location.href.replace(window.location.search,"")};u=function(n){var r={offers:{},completed:n.sendedComplete,impression:n.config.impressionId},i,t;for(i in n.offers)t=n.offers[i],r.offers[i]={valid:t.valid,send:t.sended,status:t.status,click:t.clickId,printReq:t.printStatus,hasPreping:t.hasPreping,prepingReq:t.prepingStatus};return r};for(t in twyne.placements)n["placement_"+t]=u(twyne.placements[t]);twyne.log("info","JS Unexpected redirect:\n"+JSON.stringify(n,null,"\t"))}for(i=0;i<3e3;)i++});var i={type:"default",color:"656F78",enabled:!0},r=function(n){return n.twid=twyne.utils.createGuid().replace(/-/g,""),n.domainUrl=encodeURIComponent(document.location.href),n.embedUrlOverride=n.embedUrlOverride||window.location.origin,n.optout==="true"&&(twyne.isOptout=!0),twyne.recordingConsent=n.recording_consent==="false"||n.recording_consent===!1?!1:!0,twyne.registrationLeadId=n.registration_leadid,n.registration_leadid&&delete n.registration_leadid,twyne.registrationTrustedForm=n.registration_trustedform,n.registration_trustedform&&delete n.registration_trustedform,twyne.initializeSetup=n.initializeMode?n.initializeMode:twyne.initializeModes.All,n.initializeMode&&delete n.initializeMode,twyne.continueSetup=n.continueMode?n.continueMode:twyne.continueFunctionModes.all,n.continueMode&&delete n.continueMode,twyne.redirectMode=n.redirectMode?n.redirectMode:twyne.redirectModes.first,n.redirectMode&&delete n.redirectMode,twyne.suppressRedirect=!1,twyne.keySource=n.redirectSource,n.redirectSource&&delete n.redirectSource,twyne.loading=n.loading?n.loading:i,n.loading&&delete n.loading,twyne.suppressAutoComplete=n.suppressAutoComplete===!0,n.suppressAutoComplete!==undefined&&delete n.suppressAutoComplete,n.formRegistration&&(twyne.formConfiguration=n.formRegistration,twyne.isFormRegistration=!0,delete n.formRegistration),n.transition&&(twyne.transition=n.transition,delete n.transition),n.browserLanguages=navigator.languages,twyne.redirectAction=twyne.createRedirectAction(n),n},n=function(n){var i,t;twyne.initialized=!0;twyne.seed=r(n);twyne.setBaseUrl(twyne.seed.embedUrlOverride);delete twyne.seed.embedUrlOverride;twyne.consumerController=new Consumer;twyne.customFieldController=new CustomField;i=twyne.endpoints.serving.tracking();twyne.utils.createPixelFrame(i);u();t=new Date;twyne.utils.insertCss(twyne.baseUrl+"/static/css/adserve-default/default.css?version="+t.getDate()+"."+t.getMonth()+1)},u=function(){window.twy={processSelectedCampaign:function(n,t,i){twyne.runForPlacement(i,function(i){i.processLead(n,t)})},processLinkout:function(n,t,i,r){twyne.runForPlacement(r,function(r){r.processLinkout(n,t,i)})},continueClick:function(n){var t=Object.values(twyne.placements),i,r;if(t.length!==0)if(n){for(i=0;i<length;i++)if(t[i].seed.sid===n){t[i].dispatcher.perform(Placement.events.userContinueClick);break}}else if(twyne.continueSetup===twyne.continueFunctionModes.first||twyne.continueSetup==="first")t[0].dispatcher.perform(Placement.events.userContinueClick);else if(twyne.continueSetup===twyne.continueFunctionModes.last||twyne.continueSetup==="last")t[t.length-1].dispatcher.perform(Placement.events.userContinueClick);else for(r in twyne.placements)twyne.placements[r].dispatcher.perform(Placement.events.userContinueClick)}}},f=function(){window.form=twyne.formController;window.form.placement={isCompleted:function(){var n=Object.values(twyne.placements);return n[0].sendedComplete}};twyne.form=window.form},e=function(n){var i,f,e,r,o,t,h,u;twyne.alreadyLoadCertificates||twyne.isLocalhost()||(twyne.alreadyLoadCertificates=!0,i=document.getElementsByTagName("body")[0],f=document.getElementById("twy_tfscript"),f||(e=document.location.protocol+"//api.trustedform.com/trustedform.js?l="+(new Date).getTime()+Math.random(),r=twyne.utils.createJS(e),r.id="twy_tfscript",i.appendChild(r)),o=document.getElementById("LeadiDscript_campaign"),o||(t=s(n),t==null&&(t="8a072fdd-f0bc-ea34-e6bc-a120d82679f9"),h=document.location.protocol+"//create.lidstatic.com/campaign/"+t+".js?snippet_version=2",u=twyne.utils.createJS(h),u.id="LeadiDscript_campaign",i.appendChild(u)))},o=function(n){var r,t,i,u,f;if(!twyne.alreadyLoadAnura){if(twyne.alreadyLoadAnura=!0,n.config.anuraCheck!=="True")return;if(r={instance:"1960202113",source:encodeURIComponent(""+twyne.tenantDomain+"-"+n.seed.pid+"-"+n.seed.sid),campaign:encodeURIComponent(n.seed.subid1),exid:encodeURIComponent(n.seed.twid)},t=document.createElement("script"),"object"==typeof t){i=[];for(u in r)i.push(u+"="+r[u]);i.push(Math.floor(1e12*Math.random()+1));t.type="text/javascript";t.async=!0;t.src="https://script.anura.io/request.js?"+i.join("&");f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(t,f)}}},s=function(n){for(var t=0;t<n.Placement.length;t++)if(n.Placement[t].Id==34)return n.Placement[t].Value},t=function(n){for(var t={},r=n.getAttributeNames(),i=0;i<r.length;i++)t[r[i]]=n.getAttribute(r[i]);return t=Object.assign({},twyne.seed,t),"sid"in t&&"pid"in t?new Placement(t.pid+""+t.sid,n,t):void 0};return{loaderLayerId:"twy-load",contentContainerId:"twyne-path-content",requests:[],placements:{},globalConfig:{},version:"multiple_24_01",completedPlacements:0,continueFunctionModes:{first:1,last:2,all:3},redirectModes:{all:1,bySourceId:2,first:3},initializeModes:{All:1,BySourceId:2},offerTypes:{Completed:1,Fetched:2,NeedsPreping:3,Backup:4,Invalid:5,Removed:6,Associated:7},getTrustedForm:function(){var n=document.getElementsByName("xxTrustedFormCertUrl");if(n.length>0)return n[n.length-1].value},getLeadId:function(){var n=document.getElementsByName("universal_leadid");if(n.length>0)return n[n.length-1].value},isLocalhost:function(){return twyne.endpoints.serving.api.isLocalhost},setBaseUrl:function(n){twyne.baseUrl=n;twyne.endpoints.serving.api=twyne.httpControllerFactory(n,"aserving");twyne.endpoints.serving.complianceApi=twyne.httpControllerFactory(n,"asv/cp");n&&n.indexOf("localhost")>-1&&(twyne.endpoints.timeouts={preping:3e4,complete:3e4,fetchClickId:3e4});twyne.setTenantInfo(n)},setTenantInfo:function(n){try{var t=new URL(n);twyne.tenantDomain=t&&t.hostname}catch(i){}},endpoints:{timeouts:{preping:3e3,complete:3e3,fetchClickId:3e3},serving:{index:function(n){return twyne.isOptout&&(n=Consumer.cleanPersonalInformation(n)),n.optout=twyne.isOptout===!0,twyne.baseUrl+"/aserving/index?"+twyne.utils.querySerializer(n,!0)},tracking:function(){return twyne.baseUrl+"/aserving/tk/"+twyne.seed.twid}},style:{loader:function(){return twyne.baseUrl+"/link/css/"+twyne.loading.type+"/"+twyne.loading.color+"/loader"},placement:function(n,t){return twyne.baseUrl+"/link/css/"+n+"/"+t+"/master/"+twyne.utils.isMobile()}}},log:function(n,t){if(n==="error"||n==="info"){if(typeof t=="function")return;typeof t=="object"&&(t=JSON.stringify(t));var i=twyne.endpoints.serving.api.post("/log/"+n,"json");i.send(t)}},getPlacement:function(n){if(n in twyne.placements)return twyne.placements[n];twyne.debug.log("The placement "+n+" requested does not exist")},runForPlacement:function(n,t){var i=twyne.getPlacement(n);i&&typeof t=="function"&&t(i)},initEmbed:function(t){if(!twyne.isSinglePlacement){n(t);twyne.isSinglePlacement=!0;var r=twyne.seed.pid+""+twyne.seed.sid,i=new Placement(r,document.getElementById("twyne-embed"),twyne.seed);twyne.placements[r]=i;twyne.isFormRegistration?(twyne.formController=new FormRegistration(this.formConfiguration,i),twyne.formController.start(i),f()):i.buildAdserve();this.debug.start()}},loadPlacements:function(){var i,r,f,u,e;if(!twyne.isSinglePlacement&&(i=document.getElementsByTagName("twyne"),i.length!==0)){for(n(this.globalConfig),r=0;r<i.length;r++)f=i[r],u=t(f),u&&(twyne.placements[u.id]=u),f.setAttribute("twy-already-loaded","true");if(!twyne.isFormRegistration&&twyne.initializeSetup===twyne.initializeModes.All)for(e in twyne.placements)twyne.placements[e].buildAdserve();this.debug.start()}},initializePlacement:function(i,r){var o=i+""+r,s=!1,h,f,e,u;if(twyne.initialized||n(this.globalConfig),o in twyne.placements)s=!0,twyne.placements[o].buildAdserve();else for(h=document.getElementsByTagName("twyne"),f=0;f<h.length;f++)(e=h[f],e.getAttribute("twy-already-loaded"))||(u=t(e),u&&(twyne.placements[u.id]=u),e.setAttribute("twy-already-loaded","true"),u.id===o&&(s=!0,u.buildAdserve()));if(!s)throw"This placement does not exist!";},destroyPlacement:function(n,t){var i=n+""+t;if(i in twyne.placements)twyne.placements[i].destroy(),delete twyne.placements[i];else throw"This placement does not exist!";},runAdserve:function(n,t,i){twyne.ready=!0;twyne.recordingConsent!==!1&&e(i);twyne.consumerController.build(i.Consumer);twyne.runForPlacement(n,function(n){n.startAdserve(t,i.Placement);o(n)})},endAdserve:function(n){if(twyne.finished=!0,twyne.inPreviewMode&&twyne.destroyPlacement(twyne.seed.pid,twyne.seed.sid),twyne.debug.stopRedirect||twyne.inPreviewMode){twyne.debug.log("Stop redirect by debug.");return}if(twyne.completedPlacements++,twyne.suppressRedirect){twyne.debug.log("Stop redirect by current window linkout.");return}if(twyne.redirectMode===twyne.redirectModes.all||twyne.redirectMode==="all"){var t=Object.values(twyne.placements);twyne.completedPlacements>=t.length&&twyne.redirectAction(n)}else twyne.redirectMode===twyne.redirectModes.first||twyne.redirectMode==="first"?twyne.redirectAction(n):(twyne.redirectMode===twyne.redirectModes.bySourceId||twyne.redirectMode==="bysourceid")&&twyne.placements[n.placementId].seed.sid===twyne.keySource&&twyne.redirectAction(n)},skipBecauseError:function(n){(twyne.finished=!0,twyne.isFormRegistration)||twyne.endAdserve({status:"error",numberOfOffers:0,placementId:n})}}}()});Object.defineProperty(window.twyne,"utils",{writable:!1,enumerable:!1,configurable:!1,value:function(){var t="none",i="block",f="twy-hide",e="twy-show",o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,n=function(n){return typeof n=="string"?document.getElementById(n):typeof n=="object"?n:void 0},r=function(){twyne.utils.closeCurrentModal()},u=function(n){n.target===twyne.utils._currentModal&&twyne.utils.closeCurrentModal()};return{createJS:function(n,t){var i=document.createElement("script");return i.async=!0,i.type="text/javascript",n&&(i.src=n),t&&i.addEventListener("load",t),i},injectJs:function(n,t){var i=this.createJS(n,t);document.body.appendChild(i)},createCSS:function(){var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.media="all",n},insertJs:function(t,i){if(i){var u=this.createJS(t),r=n(i);r&&r.parentNode.insertBefore(u,r)}},createEvent:function(n,t){var i=document.createEvent("Event"),r;i.initEvent(n,!0,!0);for(r in t)i["twy-"+r]=t[r];return i},insertCss:function(n){var t,i;n&&(t=this.createCSS(),t.href=n,i=document.getElementsByTagName("head")[0],i.appendChild(t))},insertHtml:function(n,t){var i=t;typeof t=="string"&&(i=document.getElementById(t));i&&n&&i.parentNode.insertAdjacentHTML("beforeend",n)},hideElement:function(i){var r=n(i);r&&(r.style.display=t)},cssHideElement:function(t){var i=n(t);i&&this.stateToogleClass(t,!1)},showElement:function(t){var r=n(t);r&&(r.style.display=i)},cssShowElement:function(t){var i=n(t);i&&this.stateToogleClass(t,!0)},stateToogleClass:function(n,t,i,r){n instanceof HTMLElement&&(i===undefined&&(i=e),r===undefined&&(r=f),n.classList.add(t?i:r),n.classList.remove(t?r:i))},slideUpElement:function(r){var u=n(r),f;u&&(f=(" "+u.className+" ").replace(/[\n\t\r]/g," "),u.className=f.replace("slide-down","")+"slide-up",u.style.display===t&&u.style.display===i)},slideDownElement:function(t){var i=n(t),r;i&&(r=(" "+i.className+" ").replace(/[\n\t\r]/g," "),i.className=r.replace("slide-up","")+"slide-down")},querySerializer:function(n,t){var r=[],i;for(i in n){var u=this.encodedIfUncoded(i),f=this.encodedIfUncoded(n[i]),e=u.startsWith("cf_")&&this.isEmpty(f);!n.hasOwnProperty(i)||t&&e||r.push(u+"="+f)}return r.join("&")},isEmpty:function(n){return n===""||n===null||n==="undefined"||n===undefined||typeof n!="string"&&typeof n!="object"&&isNaN(n)},isMobile:function(){var n=!1;return function(t){(o.test(t)||s.test(t.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n},createPixelFrame:function(n){var t=document.createElement("iframe");return t.vspace=0,t.src=n,t.frameBorder=0,t.marginWidth=0,t.marginHeight=0,t.scrolling="no",t.style.display="none",t.allowTransparency=!0,document.body.appendChild(t),t},createGuid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){return(n^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})},encodedIfUncoded:function(n){try{return n&&n!==decodeURIComponent(n)?n:encodeURIComponent(n)}catch(t){return n}},openModal:function(n,t){if(n){if(this._currentModal=n,this._currentModal.addEventListener("click",u),this._currentModalCallback=t,this._currentCloseButton=n.querySelectorAll("[twy-modal-close]"),this._currentCloseButton)for(var i=0;i<this._currentCloseButton.length;i++)this._currentCloseButton[i].addEventListener("click",r);this.stateToogleClass(n,!0)}},closeCurrentModal:function(){if(this._currentCloseButton){for(var n=0;n<this._currentCloseButton.length;n++)this._currentCloseButton[n].removeEventListener("click",r);delete this._currentCloseButton}typeof this._currentModalCallback=="function"&&(twyne.utils._currentModalCallback(),delete twyne.utils._currentModalCallback);this._currentModal&&(this.stateToogleClass(this._currentModal,!1),this._currentModal.removeEventListener("click",u),delete this._currentModal)},camelize:function(n){if(n)return n.replace(/^([A-Z])|[\s-_]+(\w)/g,function(n,t,i){return i?i.toUpperCase():t.toLowerCase()})},titleCase:function(n){if(n){n=n.toLowerCase().split(" ");for(var t=0;t<n.length;t++)n[t]=n[t].charAt(0).toUpperCase()+n[t].slice(1);return n.join(" ")}},toUpperCase:function(n){return n?n.toUpperCase():""},toLowerCase:function(n){return n?n.toLowerCase():""}}}()});document.getElementByTwyneId=function(n){if(typeof document.querySelector=="function"){var t=document.querySelector("[twy-id='"+n+"']");if(t)return t}return document.getElementById(n)};Element.prototype.getAttributeNames===undefined&&(Element.prototype.getAttributeNames=function(){for(var t=this.attributes,i=t.length,r=new Array(i),n=0;n<i;n++)r[n]=t[n].name;return r});Object.values||Object.defineProperty(Object,"values",{enumerable:!1,configurable:!0,writable:!0,value:function(n){"use strict";var t,i;if(n===undefined||n===null)throw new TypeError("Cannot convert first argument to object");t=[];for(i in n)n.hasOwnProperty(i)&&t.push(n[i]);return t}});Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(n){"use strict";var f,i,t,e,r,s,u,o;if(n===undefined||n===null)throw new TypeError("Cannot convert first argument to object");for(f=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==undefined&&t!==null)for(t=Object(t),e=Object.keys(Object(t)),r=0,s=e.length;r<s;r++)u=e[r],o=Object.getOwnPropertyDescriptor(t,u),o!==undefined&&o.enumerable&&(f[u]=t[u]);return f}});Array.prototype.filter||(Array.prototype.filter=function(n,t){"use strict";if(!((typeof n=="Function"||typeof n=="function")&&this))throw new TypeError;var f=this.length>>>0,u=new Array(f),r=this,e=0,i=-1;if(t===undefined)while(++i!==f)i in this&&n(r[i],i,r)&&(u[e++]=r[i]);else while(++i!==f)i in this&&n.call(t,r[i],i,r)&&(u[e++]=r[i]);return u.length=e,u});Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){var r,f,u,i;if(!this)throw new TypeError('"this" is (null) or (undefined)');if((f=Object(this),u=f.length>>>0,u===0)||(i=+t||0,Math.abs(i)===Infinity&&(i=0),i>=u))return-1;for(r=Math.max(i>=0?i:u-Math.abs(i),0);r<u;){if(r in f&&f[r]===n)return r;r++}return-1});String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!==undefined?n[i]:t})});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});String.prototype.capitalize||(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)});Array.prototype.findIndex||(Array.prototype.findIndex=function(n){var t;if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof n!="function")throw new TypeError("predicate must be a function");var i=Object(this),u=i.length>>>0,f=arguments[1],r;for(t=0;t<u;t++)if(r=i[t],n.call(f,r,t,i))return t;return-1});Array.prototype.find||(Array.prototype.find=function(n){var t;if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof n!="function")throw new TypeError("predicate must be a function");var i=Object(this),u=i.length>>>0,f=arguments[1],r;for(t=0;t<u;t++)if(r=i[t],n.call(f,r,t,i))return r;return undefined}),function(){function r(n){var r,t,u,e,o;if(typeof n!="string")throw new TypeError("document.querySelectorAll: Invalid selector type. Expect: string. Found: "+typeof n+".");for(r=[],t=n.split(","),t=i(t),u=0,e=t.length;u!==e;++u)o=t[u],r=r.concat(f.call(this,o));return r}function u(n){if(typeof n!="string")throw new TypeError("document.querySelector: Invalid selector type. Expect: string. Found: "+typeof n+".");var t=this.querySelectorAll(n);return t.length>0?t[0]:null}if(!HTMLElement){function HTMLElement(){}}var t=function(n){var t,i,r;try{return Array.prototype.slice.call(n)}catch(u){for(t=[],i=0,r=n.length;i!==r;++i)t=t.concat(n[i]);return t}},i=function(n){if(typeof n=="string")return n.trim();if(Object.prototype.toString.call(n)==="[object Array]")for(var t=0,i=n.length;t!==i;++t)n[t]=n[t].trim();return n},n=function(n,t){if(typeof n!="string"||Object.prototype.toString.call(t)!=="[object RegExp]")throw TypeError;return{selectors:n.match(t)||[],ruleStr:n.replace(t," ")}},f=function(r){var nt=this,o,u=[],b,tt,d,it,rt,s,g,ut,l,k,a,h,f,v,y,w,e,c,p;if(r=i(r),r.charAt(0)==="*"&&(s=nt.getElementsByTagName("*"),u=u.concat(t(s))),o=n(r,/#[\w-_]+/g),b=o.selectors?o.selectors[0]:null,r=o.ruleStr,o=n(r,/\.[\w-_]+/g),tt=o.selectors,r=o.ruleStr,o=n(r,/\[.+?\]/g),d=o.selectors,r=o.ruleStr,o=n(r,/\w+/g),it=o.selectors,r=o.ruleStr,b)return b=b.substring(1),[document.getElementById(b)||null];for(it.length!==0&&(s=nt.getElementsByTagName(it[0]),u=u.concat(t(s))),f=0,v=tt.length;f!==v;++f)if(rt=tt[f].substring(1),s=nt.getElementsByClassName(rt),s=t(s),u.length===0)u=u.concat(s);else for(h=[],h=h.concat(u),u=[],g=0,ut=s.length;g!==ut;++g)y=s[g],h.indexOf(y)!==-1&&(u=u.concat([y]));if(d.length!==0){for(l={},f=0,v=d.length;f!==v;++f)k=d[f],k=k.substring(1,k.length-1),a=k.split("="),a=i(a),a[1]&&(a[1]=a[1].substring(1,a[1].length-1)),l[a[0]]=a[1];for(h=[],h=h.concat(u),u=[],f=0,v=h.length;f!==v;++f){y=h[f];w=!0;for(e in l)if(c=e.charAt(e.length-1),/[\^\*\$]$/.test(e)&&(e=e.substring(0,e.length-1)),p=y.getAttribute(e)||"",c==="*"&&p.indexOf(l[e+c])===-1){w=!1;break}else if(c==="^"&&p.indexOf(l[e+c])!==0){w=!1;break}else if(c==="$"&&(p.lastIndexOf(l[e+c])===-1?!1:p.lastIndexOf(l[e+c]))!==p.length-l[e+c].length){w=!1;break}else if(/[\$\*\^]/.test(c)===!1&&p!==l[e]){w=!1;break}w&&(u=u.concat([y]))}}return[].concat(u)};document.querySelectorAll===undefined&&(document.querySelectorAll=r);HTMLElement.prototype.querySelectorAll===undefined&&(HTMLElement.prototype.querySelectorAll=r);typeof HTMLDocument!="undefined"&&HTMLDocument.prototype.querySelectorAll===undefined&&(HTMLDocument.prototype.querySelectorAll=r);document.querySelector===undefined&&(document.querySelector=u);HTMLElement.prototype.querySelector===undefined&&(HTMLElement.prototype.querySelector=u);typeof HTMLDocument!="undefined"&&HTMLDocument.prototype.querySelector===undefined&&(HTMLDocument.prototype.querySelector=u)}(),function(){var n=document.createElement("link"),t;n.rel="stylesheet";n.type="text/css";n.media="all";n.innerHTML=".hide-single{display:none;opacity:0;transition:all .3s linear}.is-visible{display:block}.is-open{margin-top:15px;opacity:1}.slide-down,.slide-up{max-height:0;overflow-y:hidden;-webkit-transition:max-height .5s ease-in-out;-moz-transition:max-height .5s ease-in-out;-o-transition:max-height .5s ease-in-out;transition:max-height .5s ease-in-out}.slide-down{max-height:10em}";t=document.getElementsByTagName("head")[0];t.appendChild(n)}();Object.defineProperty(window.twyne,"createRedirectAction",{writable:!1,enumerable:!1,configurable:!1,value:function(n){"use strict";var t=typeof n.completeCallback=="function",u=typeof n.rurl=="string"&&n.rurl!=="",i=n.suppressredirect==="true"||n.suppressredirect===!0,r;return r=i||u?i&&!t?function(n){this.hasCompleteCallback?this.completeCallback(n):(console.log("Twyne: The placement is completed and suppress redirect = true"),twyne.log("error","Twyne: The placement is completed and suppress redirect = true \nEvent:\n"+JSON.stringify(n)))}.bind({hasCompleteCallback:t,completeCallback:n.completeCallback}):function(n){this.hasCompleteCallback&&this.completeCallback(n);this.hasSuppress||(window.location.href=decodeURIComponent(this.rurl))}.bind({rurl:n.rurl,hasSuppress:i,hasCompleteCallback:t,completeCallback:n.completeCallback}):function(n){this.hasCompleteCallback&&this.completeCallback(n);var i=twyne.htmlFactory.createRedirectUrlErrorMessage(),t=document.getElementById("twy-placement-"+n.placementId);t&&t.insertAdjacentHTML("afterbegin",i);twyne.log("warn","No Url Redirect specified \nEvent:\n"+JSON.stringify(n))}.bind({hasCompleteCallback:t,completeCallback:n.completeCallback}),delete n.rurl,delete n.redirectConfig,delete n.suppressredirect,delete n.completeCallback,r}});httpRequest.prototype.onSuccess=function(n){return this.request.successFn=n,this};httpRequest.prototype.onError=function(n){return this.request.errorFn=n,this};httpRequest.prototype.setTimeout=function(n){return this.request.timeout=n,this};httpRequest.prototype.onTimeout=function(n){return this.request.ontimeout=n,this};httpRequest.prototype.send=function(n){this.request.send(this.getPayload(n))};httpRequest.prototype.getPayload=function(n){var t,i;if(n){if(this.contentType.indexOf("urlencoded")!==-1){t=[];for(i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")}if(this.contentType.indexOf("json"))return JSON.stringify(n)}return n};httpController.prototype.get=function(n){var t;return t=n&&n[0]==="/"?this.completeUrl+n:this.completeUrl+"/"+n,new httpRequest(t,"GET",!0)};httpController.prototype.post=function(n,t){var i;return i=n&&n[0]==="/"?this.completeUrl+n:this.completeUrl+"/"+n,t?t==="json"&&(t="application/json; charset=UTF-8"):t="application/x-www-form-urlencoded; charset=UTF-8",new httpRequest(i,"POST",!0,t)};Object.defineProperty(window.twyne,"httpControllerFactory",{writable:!1,enumerable:!1,configurable:!1,value:function(n,t){return twyne.inPreviewMode?new httpControllerPreview:new httpController(n,t)}});dispatcherEvent.prototype.registerCallback=function(n){this.callbacks.push(n)};dispatcherEvent.prototype.unregisterCallback=function(n){var t=this.callbacks.indexOf(n);t>-1&&this.callbacks.splice(t,1)};dispatcherEvent.prototype.fire=function(n){for(var i=this.callbacks.slice(0),t=0;t<i.length;t++)i[t](n)};dispatcher.prototype.perform=function(n,t){var i=this.events[n];i&&i.fire(t)};dispatcher.prototype.on=function(n,t){var i=this.events[n];i||(i=new dispatcherEvent(n),this.events[n]=i);i.registerCallback(t)};dispatcher.prototype.off=function(n,t){var i=this.events[n];i&&i.callbacks.indexOf(t)>-1&&(i.unregisterCallback(t),i.callbacks.length===0&&(this.events[n]=undefined))};dispatcher.prototype.clear=function(){this.events={}};Object.defineProperty(window.twyne,"htmlFactory",{writable:!1,enumerable:!1,configurable:!1,value:{createLoadingHTML:function(n,t){if(!n)return"";switch(n.toLowerCase()){case"circle":return'<div name="twy-load" id="'+t+'" class="lds-circle twy-load"><\/div>';case"dual-ring":return'<div name="twy-load" id="'+t+'" class="lds-dual-ring twy-load"><\/div>';case"facebook":return'<div name="twy-load" id="'+t+'" class="lds-facebook twy-load"><div><\/div><div><\/div><div><\/div><\/div>';case"ring":return'<div name="twy-load" id="'+t+'" class="lds-ring twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"roller":return'<div name="twy-load" id="'+t+'" class="lds-roller twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"default":return'<div name="twy-load" id="'+t+'" class="lds-default twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"ellipsis":return'<div name="twy-load" id="'+t+'" class="lds-ellipsis twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"grid":return'<div name="twy-load" id="'+t+'" class="lds-grid twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"ripple":return'<div name="twy-load" id="'+t+'" class="lds-ripple twy-load"><div><\/div><div><\/div><\/div>';case"hourglass":return'<div name="twy-load" id="'+t+'" class="lds-hourglass twy-load"><\/div>';case"spinner":return'<div name="twy-load" id="'+t+'" class="lds-spinner twy-load"><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><div><\/div><\/div>';case"none":return""}},createPubCallBackErrorMessage:function(){return'<span id="twy-redirectError">The suppress redirect was set but there is no complete callback provided!<\/span>'},createRedirectUrlErrorMessage:function(){return'<span id="twy-redirectError">Suppress need to be true or the RURL need to be provided!<\/span>'},cqsRequiredTitleMessage:function(n,t){var r="Once you have completed the required field(s) you will see a success message here.",i;return t.config.cqDefaultMessage&&(r=t.config.cqDefaultMessage),i="twy-required-custom-question-title-"+t.id+"-"+n,{id:i,html:'<div id="'+i+'" class="twy-required-custom-question-title twy-show">'+r+"<\/div>"}},cqsRequiredErrorMessage:function(n,t){var r="Please complete all custom questions",i;return t.config.cqErrorMessage&&(r=t.config.cqErrorMessage),i="twy-custom-field-error-message-"+t.id+"-"+n,{id:i,html:'<div id="'+i+'" class="twy-custom-field-error-message twy-hide">'+r+"<\/div>"}},cqsRequiredSuccessMessage:function(n,t){var r="Your form is valid. We submited your lead.",i;return t.config.cqSuccessMessage&&(r=t.config.cqSuccessMessage),i="twy-custom-field-success-message-"+t.id+"-"+n,{id:i,html:'<div id="'+i+'" class="twy-custom-field-success-message twy-hide">'+r+"<\/div>"}},allOffersRequiredErrorMessage:function(n){var t="Please check all offers",i=n.config.allOffersRequiredErrorMessage;return i&&(t=i),'<div id="twy-required-all-offers-error-message-'+n.id+'" class="required-all-offers-error-message twy-hide">'+t+"<\/div>"},createHideAutomaticallyButton:function(n,t){return'<div class="twyne-text-center"><button id="hide-automatically-button-'+n+'" class="twy-buttonnext" type="button">'+t+"<\/button><\/div>"}}});UnitedStatesProvider.prototype.name="United States";UnitedStatesProvider.prototype.states={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"};UnitedStatesProvider.prototype.getCountryFullName=function(){return this.name};UnitedStatesProvider.prototype.getStateFullName=function(n){return this.states[n]?this.states[n]:""};UnitedStatesProvider.prototype.numberIsValid=function(n){return n&&(n.length===7||n.length===10)};UnitedStatesProvider.prototype.getPhoneAreaCode=function(n){return this.numberIsValid(n)?n.length===10?n.substring(0,3):"":""};UnitedStatesProvider.prototype.getPhoneNumber=function(n){return this.numberIsValid(n)?n.length===10?n.substring(6):n.substring(3):""};UnitedStatesProvider.prototype.getPhonePrefix=function(n){return this.numberIsValid(n)?n.length===10?n.substring(3,6):n.substring(0,3):""};UnitedStatesProvider.prototype.getDob=function(n){return n};AustraliaProvider.prototype=Object.create(UnitedStatesProvider.prototype);AustraliaProvider.prototype.name="Australia";AustraliaProvider.prototype.states={NSW:"New South Wales",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia",ACT:"Australian Capital Territory",NT:"Northern Territory"};AustraliaProvider.prototype.numberIsValid=function(n){return n&&(n.length===8||n.length===10)};AustraliaProvider.prototype.getPhoneAreaCode=function(n){return this.numberIsValid(n)?n.length===10?n.substring(0,2):"":""};AustraliaProvider.prototype.getPhoneNumber=function(n){return this.numberIsValid(n)?n.length===10?n.substring(6):n.substring(4):""};AustraliaProvider.prototype.getPhonePrefix=function(){return""};AustraliaProvider.prototype.getDob=function(n){if(n){var t=n.split("/");if(t.length===3)return t[1]+"/"+t[0]+"/"+t[2]}return""};CanadaProvider.prototype=Object.create(UnitedStatesProvider.prototype);CanadaProvider.prototype.name="Canada";CanadaProvider.prototype.states={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"};CanadaProvider.prototype.getPhonePrefix=function(){return""};CanadaProvider.prototype.getDob=function(n){if(n){var t=n.split("/");if(t.length===3)return t[2]+"/"+t[0]+"/"+t[1]}return""};var instances={AUProvider:null,CAProvider:null,USProvider:null};Object.defineProperty(window.twyne,"providerFactory",{writable:!1,enumerable:!1,configurable:!1,value:function(n){switch(n.controls.country.value){case"AU":return instances.AUProvider===null&&(instances.AUProvider=new AustraliaProvider),instances.AUProvider;case"CA":return instances.CAProvider===null&&(instances.CAProvider=new CanadaProvider),instances.CAProvider;default:return instances.USProvider===null&&(instances.USProvider=new UnitedStatesProvider),instances.USProvider}}});MergeTag.charFlags={"default":"|",start:"{",end:"}"};MergeTag.create=function(n){var t=new MergeTag,i,r,u;if(n.index===null&&n.index===undefined||n.index>=n.offerCopy.length)return t;for(t.indexStart=n.index,i=n.offerCopy,n.index++;n.index<i.length;){if(i[n.index]===MergeTag.charFlags.start)break;else if(i[n.index]===MergeTag.charFlags.default){if(t.hasDefault)break;t.hasDefault=!0;t.indexDefault=n.index;t.mergeKey=i.substr(t.indexStart+1,n.index-(t.indexStart+1))}else if(i[n.index]===MergeTag.charFlags.end){r=t.indexStart;u="mergeKey";t.hasDefault&&(r=t.indexDefault,u="defaultValue");t.indexEnd=n.index;t[u]=i.substr(r+1,n.index-(r+1));t.valid=!0;break}n.index++}return t};Object.defineProperty(window.twyne,"mergeData",{writable:!1,enumerable:!1,configurable:!1,value:function(){var n=function(n,t){for(var f=[],u,i,r=0;r<n.length;r++)if(n[r]===MergeTag.charFlags.start&&(u={index:r,offerCopy:n},i=MergeTag.create(u),i.valid)){r=u.index;let n="";if(i.mergeKey.includes("(")){const t=i.mergeKey.match(/\(([^)]+)\)/g)[0];n=t.slice(1,-1);i.mergeKey=i.mergeKey.replace(t,"")}if(i.mergeKey in twyne.mergeTagResolver.mergeResolver){let r;r=n?twyne.mergeTagResolver.mergeResolver[i.mergeKey](t,n):twyne.mergeTagResolver.mergeResolver[i.mergeKey](t);i.value=r||i.defaultValue}else i.value="{"+i.mergeKey+(n==""?"":"("+n+")")+"}";f.push(i)}return f},t=function(n,t){for(var u=[],r=-1,i=0;i<n.length;i++)u.push(t.substr(++r,n[i].indexStart-r)),u.push(n[i].value),r=n[i].indexEnd;return++r<t.length&&u.push(t.substr(r)),u};return{checkOffer:function(i,r){var u,f,e;try{if(u=document.getElementById("twy-campaign"+i),!u)return;if(f=n(u.innerHTML,r),f.length===0)return;e=t(f,u.innerHTML);e.length>0&&(u.innerHTML=e.join(""))}catch(o){twyne.debug.log("An error was occurred during offer merged operation. See the error:");twyne.debug.log(o)}},checkTemplate:function(i,r){var u,f,e;try{if(u=document.getElementById(i),!u)return;if(f=n(u.innerHTML,r),f.length===0)return;e=t(f,u.innerHTML);e.length>0&&(u.innerHTML=e.join(""))}catch(o){twyne.debug.log("An error was occurred during offer merged operation. See the error:");twyne.debug.log(o)}}}}()});Object.defineProperty(window.twyne,"mergeTagResolver",{writable:!1,enumerable:!1,configurable:!1,value:function(){var n={getConsumerSafe:function(n,t,i){if(t in n.controls){var r=n.controls[t];return r&&i?i(r.value):r?r.value:r}},formatDate:function(n,t){const r=n.getFullYear(),u=n.getMonth()+1,f=n.getDate(),i=n.getHours(),e=n.getMinutes(),o=n.getSeconds(),h=i>=12?"PM":"AM",s=i%12||12;return t=t.replace("yyyy",r),t=t.replace("yy",String(r).slice(-2)),t=t.replace("MM",String(u).padStart(2,"0")),t=t.replace("M",u),t=t.replace("dd",String(f).padStart(2,"0")),t=t.replace("d",f),t=t.replace("HH",String(i).padStart(2,"0")),t=t.replace("H",i),t=t.replace("mm",String(e).padStart(2,"0")),t=t.replace("m",e),t=t.replace("ss",String(o).padStart(2,"0")),t=t.replace("s",o),t=t.replace("hh",String(s).padStart(2,"0")),t=t.replace("h",s),t.replace("tt",h)},address1:function(n){return this.getConsumerSafe(n,"address1")},address1_lower:function(n){return this.getConsumerSafe(n,"address1",twyne.utils.toLowerCase)},address1_upper:function(n){return this.getConsumerSafe(n,"address1",twyne.utils.toUpperCase)},address1_camel:function(n){return this.getConsumerSafe(n,"address1",twyne.utils.titleCase)},address2:function(n){return this.getConsumerSafe(n,"address2")},address2_lower:function(n){return this.getConsumerSafe(n,"address2",twyne.utils.toLowerCase)},address2_upper:function(n){return this.getConsumerSafe(n,"address2",twyne.utils.toUpperCase)},address2_camel:function(n){return this.getConsumerSafe(n,"address2",twyne.utils.titleCase)},age:function(n){return this.getConsumerSafe(n,"age")},city:function(n){return this.getConsumerSafe(n,"city")},city_lower:function(n){return this.getConsumerSafe(n,"city",twyne.utils.toLowerCase)},city_upper:function(n){return this.getConsumerSafe(n,"city",twyne.utils.toUpperCase)},city_camel:function(n){return this.getConsumerSafe(n,"city",twyne.utils.titleCase)},consumerid:function(n){return this.getConsumerSafe(n,"consumerid")},country:function(n){return this.getConsumerSafe(n,"country")},dob:function(n){return this.getConsumerSafe(n,"dob",twyne.providerFactory(n).getDob.bind(twyne.providerFactory(n)))},email:function(n){return this.getConsumerSafe(n,"email")},first:function(n){return this.getConsumerSafe(n,"first")},first_lower:function(n){return this.getConsumerSafe(n,"first",twyne.utils.toLowerCase)},first_upper:function(n){return this.getConsumerSafe(n,"first",twyne.utils.toUpperCase)},first_camel:function(n){return this.getConsumerSafe(n,"first",twyne.utils.titleCase)},gender:function(n){return this.getConsumerSafe(n,"gender")},gender_upper:function(n){return this.getConsumerSafe(n,"gender",twyne.utils.toUpperCase)},gender_lower:function(n){return this.getConsumerSafe(n,"gender",twyne.utils.toLowerCase)},last:function(n){return this.getConsumerSafe(n,"last")},last_lower:function(n){return this.getConsumerSafe(n,"last",twyne.utils.toLowerCase)},last_upper:function(n){return this.getConsumerSafe(n,"last",twyne.utils.toUpperCase)},last_camel:function(n){return this.getConsumerSafe(n,"last",twyne.utils.titleCase)},middle:function(n){return this.getConsumerSafe(n,"middle")},mobile:function(n){return this.getConsumerSafe(n,"mobile")},phone:function(n){return this.getConsumerSafe(n,"phone")},state:function(n){return this.getConsumerSafe(n,"state")},title:function(n){return this.getConsumerSafe(n,"title")},title_lower:function(n){return this.getConsumerSafe(n,"title",twyne.utils.toLowerCase)},title_upper:function(n){return this.getConsumerSafe(n,"title",twyne.utils.toUpperCase)},title_camel:function(n){return this.getConsumerSafe(n,"title",twyne.utils.titleCase)},workphone:function(n){return this.getConsumerSafe(n,"workphone")},zip:function(n){return this.getConsumerSafe(n,"zip")},phone_areacode:function(n){return this.getConsumerSafe(n,"phone",twyne.providerFactory(n).getPhoneAreaCode.bind(twyne.providerFactory(n)))},phone_number:function(n){return this.getConsumerSafe(n,"phone",twyne.providerFactory(n).getPhoneNumber.bind(twyne.providerFactory(n)))},phone_prefix:function(n){return this.getConsumerSafe(n,"phone",twyne.providerFactory(n).getPhonePrefix.bind(twyne.providerFactory(n)))},state_full:function(n){return this.getConsumerSafe(n,"state",twyne.providerFactory(n).getStateFullName.bind(twyne.providerFactory(n)))},country_full:function(n){return this.getConsumerSafe(n,"country",twyne.providerFactory(n).getCountryFullName.bind(twyne.providerFactory(n)))},domain_url:function(){return window.location.hostname},currentdate:function(n,t){return this.formatDate(new Date,t)}};return{mergeResolver:n}}()});CustomField.events={statusChanged:"status_changed"};CustomField.prototype.inputControl=function(n){this.hasControls(n)||this.controls.push({key:n,value:"",dispatcher:new dispatcher})};CustomField.prototype.hasControls=function(n){return this.controls.findIndex(function(t){return t.key==n})>-1};CustomField.prototype.registerBind=function(n,t){var i=this.controls.find(function(t){return t.key==n});i.dispatcher.on(CustomField.events.statusChanged,t)};CustomField.prototype.propertyChanged=function(n,t){var i=this.controls.find(function(t){return t.key==n});i.value=t.value;switch(t.type){case"text":case"textarea":case"select":case"select-one":case"radio":case"radiobutton":i.value=t.value;break;case"checkbox":t.value!=""||t.value!=undefined?i.value=t.value:(t.value==""||t.value==undefined)&&t.checked&&(i.value=t.checked);break;default:i.value=t.value}i.dispatcher.perform(CustomField.events.statusChanged,i.value)};CustomField.prototype.on=function(n,t){this.dispatcher.on(n,t)};CustomQuestion.events={statusChange:"status_change"};CustomQuestion.prototype.mapInput=function(){var i,n,t,r,u,f;this.container&&(i=this.container.querySelectorAll("input, select, textarea"),i&&i.length>0&&(n=i[0],n&&(t=n.getAttribute("twyfieldtype"),(t===undefined||t===null)&&(t=n.getAttribute("twyname"),(t===undefined||t===null)&&(t=n.name)),this.cqType=t.toLowerCase(),this.trySetRegex(n),r=n.getAttribute("twyalwaysvisible"),r&&(this.alwaysVisible=r==="True"),u=n.getAttribute("twyPattern"),u&&(this.pattern=u),f=n.getAttribute("twycf"),f&&(this.cfBindName=f,this.isCfBindValue=!0,twyne.customFieldController.inputControl(this.cfBindName),twyne.customFieldController.registerBind(this.cfBindName,this.updateControl.bind(this))),this.required=this.container.classList.contains("twy-required"),this.htmlType=n.type,i.length>1?this.mapMultiplesFields(i):this.mapSingleField(i),this.isCustomField?(this.valid=this.isValid(),this.isVisible=!0,this.dispatcher.perform(CustomQuestion.events.statusChange,this)):this.checkIsValid(),this.setValidationClass(),this.validateCustomQuestion())))};CustomQuestion.prototype.trySetRegex=function(n){try{var t=n.getAttribute("twyRegex");t&&(this.regex=new RegExp(t))}catch(i){console.warn(i)}};CustomQuestion.prototype.setValueValidClass=function(n){twyne.utils.stateToogleClass(this.container,n,CustomQuestion.valueFieldsClasses.invalid,CustomQuestion.valueFieldsClasses.valid)};CustomQuestion.valueFieldsClasses={valid:"twy-valid-value",invalid:"twy-invalid-value"};CustomQuestion.prototype.mapMultiplesFields=function(n){var i,r,t;for(this.hasMultiControls=!0,this.cqControl=n,this.isCustomField=!twyne.consumerController.isCommonProperty(this.cqType),this.required&&(i=n[0].getAttribute("twyCheckboxlistType"),r=n[0].getAttribute("twyCheckboxlistValue"),i&&r&&(this.twyCheckboxlistType=i,this.twyCheckboxlistValue=parseInt(r))),t=0;t<n.length;t++)this.cfBindName&&this.bindCfOnControl(n[t]),n[t].checked&&this.totalChecked++,this.isCustomField&&this.isCfBindValue?n[t].addEventListener("change",function(n){var t=n.target;twyne.customFieldController.propertyChanged(this.cfBindName,t)}.bind(this)):n[t].addEventListener("change",function(n){var t=n.target;this.updateMultiControl(t)}.bind(this))};CustomQuestion.prototype.mapSingleField=function(n){this.cqControl=n[0];this.isCustomField=!twyne.consumerController.isCommonProperty(this.cqType);this.pattern&&VMasker(this.cqControl).maskPattern(this.pattern);this.cqControl.type==="text"&&(this.validClass="twy-input-good");this.cqControl.type==="select-one"&&(this.validClass="twy-sel-good");this.cfBindName&&this.bindCfOnControl(this.cqControl);this.isCustomField&&!this.isCfBindValue?this.cqControl.addEventListener("change",function(n){var t=n.target;this.updateControl(t.value)}.bind(this)):this.isCustomField&&this.isCfBindValue?this.cqControl.addEventListener("change",function(n){var t=n.target;twyne.customFieldController.propertyChanged(this.cfBindName,t)}.bind(this)):(this.updateFromConsumer(twyne.consumerController.getProperty(this.cqType)),this.cqControl.addEventListener("change",function(n){var t=n.target;twyne.consumerController.propertyChanged(this.cqType,t.value)}.bind(this)))};CustomQuestion.prototype.updateFromConsumer=function(n){n&&(this.isVisible=n.isVisible,this.isInvalidValue=n.isInvalidValue,this.updateControl(n.value),this.setValueValidClass(n.isInvalidValue))};CustomQuestion.listControlValidationTypes={exatcSelected:"560",maximumSelected:"561",minimumSelected:"562"};CustomQuestion.prototype.isValid=function(){var i=function(n){switch(n.twyCheckboxlistType){case CustomQuestion.listControlValidationTypes.exatcSelected:return n.totalChecked===n.twyCheckboxlistValue;case CustomQuestion.listControlValidationTypes.maximumSelected:return n.totalChecked>0&&n.totalChecked<=n.twyCheckboxlistValue;case CustomQuestion.listControlValidationTypes.minimumSelected:return n.totalChecked>=n.twyCheckboxlistValue;default:return n.totalChecked>0}},r=this.checkRegex(),n,t;if(this.required){if(r){if(this.htmlType==="checkbox")return this.hasMultiControls?i(this):this.cqControl.checked;if(this.htmlType==="radio"){if(this.cqControl||this.cqControl.length>0){for(n=!1,t=0;t<this.cqControl.length;t++)n=n||this.cqControl[t].checked;return n}return!0}return this.cqControl!==undefined&&this.cqControl.value!==undefined&&this.cqControl.value!==""}return!1}return!0};CustomQuestion.validationClasses={valid:"twy-valid-custom-field",invalid:"twy-invalid-custom-field",correctedValue:"twy-input-correct-format",notCorrectedValue:"twy-input-wrong-format"};CustomQuestion.prototype.setValidationClass=function(){twyne.utils.stateToogleClass(this.container,this.valid,CustomQuestion.validationClasses.valid,CustomQuestion.validationClasses.invalid)};CustomQuestion.prototype.updateControl=function(n){var i,t;if(this.hasMultiControls){for(i=0;i<this.cqControl.length;i++)t=this.cqControl[i],(t.type=="checkbox"||t.type=="radio"||t.type=="radiobutton")&&t.value==n&&(t.checked=!0);n?this.setValidClass():this.removeValidClass();this.checkIsValid();this.setValidationClass()}else{try{this.cqControl.checked=(this.cqControl.type=="checkbox"||this.cqControl.type=="radio"||this.cqControl.type=="radiobutton")&&this.cqControl.value==n?!0:!0}catch(r){}this.cqControl.value=n;n?this.setValidClass():this.removeValidClass();this.checkIsValid();this.setValidationClass()}};CustomQuestion.prototype.checkRegex=function(){if(!this.regex)return!0;var t=this.getValue(),n=t?this.regex.test(t):!0;return this.regexIsValid=n,this.toogleValidationValueClass(n),n};CustomQuestion.prototype.toogleValidationValueClass=function(n){twyne.utils.stateToogleClass(this.container,n,CustomQuestion.validationClasses.correctedValue,CustomQuestion.validationClasses.notCorrectedValue)};CustomQuestion.prototype.setValidClass=function(){this.validClass&&this.cqControl.classList.add(this.validClass)};CustomQuestion.prototype.removeValidClass=function(){this.validClass&&this.cqControl.classList.remove(this.validClass)};CustomQuestion.prototype.checkIsValid=function(){this.valid!==this.isValid()&&(this.valid=!this.valid,this.dispatcher.perform(CustomQuestion.events.statusChange,this))};CustomQuestion.prototype.updateMultiControl=function(n){this.htmlType==="checkbox"&&(this.totalChecked<0&&(this.totalChecked=0),this.totalChecked+=n.checked?1:-1);this.checkIsValid();this.setValidationClass()};CustomQuestion.prototype.validateCustomQuestion=function(){this.updateFromConsumer(twyne.consumerController.getProperty(this.cqType));this.alwaysVisible?this.isVisible=!0:this.required?this.hasMultiControls||this.isCustomField?this.isVisible=!0:this.regex&&!this.regexIsValid&&(this.isVisible=!0):this.isVisible=!1};CustomQuestion.prototype.show=function(){twyne.utils.showElement(this.container);this.open=!0};CustomQuestion.prototype.hide=function(){twyne.utils.hideElement(this.container);this.open=!1};CustomQuestion.prototype.getValue=function(n){var r,i,t;if(n||(n=","),r=function(n){var t=n.getAttribute("type");return(t==="checkbox"||t==="radio")&&n.checked},this.hasMultiControls){for(i=[],t=0;t<this.cqControl.length;t++)r(this.cqControl[t])&&i.push(this.cqControl[t].value);return i.join(n)}if(this.cqControl.type==="checkbox"||this.cqControl.type==="radio"){if(this.cqControl.checked)return this.cqControl.value}else return this.cqControl.value};CustomQuestion.prototype.bindCfOnControl=function(n){var t,i;if(this.cfBindName&&this.cfBindName in twyne.seed){if(t=twyne.seed[this.cfBindName],!t)return;i=n.type||n.nodeName.toLowerCase();switch(i){case"text":case"textarea":case"select":case"select-one":n.value=t;break;case"radio":case"radiobutton":case"checkbox":n.value===t&&(n.checked=!0)}}};CustomQuestion.prototype.on=function(n,t){this.dispatcher.on(n,t)};Object.defineProperty(window.twyne,"offerAddressValidation",{writable:!1,enumerable:!1,configurable:!1,value:function(){var e=function(n){var t=["address1","zip"],i=["zip"];if(n.cqs){var f=n.cqsName,r=0,u=0;f.forEach(function(n){t.indexOf(n)!==-1&&r++;i.indexOf(n)!==-1&&u++});n.addressValidationType=r===t.length?"full":u===i.length?"partial":"default"}else n.addressValidationType="default"},n=function(n){var t=n.cqs;t&&n.cqsName.forEach(function(n){twyne.consumerController.addressFields.indexOf(n)===-1||t[n].alwaysVisible||(t[n].isVisible=!1)})},t=function(n){var t=n.cqs;t&&n.cqsName.forEach(function(n){twyne.consumerController.addressFields.indexOf(n)!==-1&&(t[n].isVisible=!0)})},o=function(n){var t=[],i=n.cqs;return i&&n.cqsName.forEach(function(n){twyne.consumerController.addressFields.indexOf(n)!==-1&&t.push(n)}),t},s=function(){return twyne.consumerController.validations.addressValidation&&twyne.consumerController.validations.addressValidation==="True"},h=function(){return twyne.consumerController.validations.zipValidation&&twyne.consumerController.validations.zipValidation==="True"},i=function(i){switch(i.addressValidationType){case"full":s()?n(i):r(i)||f(i)&&u(i)?(t(i),i.cqs.address1.isInvalidValue=!0,i.cqs.address1.required&&(i.cqs.address1.valid=!1,i.valid=!1)):n(i);break;case"partial":h()?n(i):r(i)||f(i)&&u(i)?(t(i),i.cqs.zip.isInvalidValue=!0,i.cqs.zip.required&&(i.cqs.zip.valid=!1,i.valid=!1)):n(i);break;default:var l=o(i),e=0,c=i.cqs;c&&(i.cqsName.forEach(function(n){l.indexOf(n)===-1||c[n].valid||e++;n==="address2"&&c.address1.valid&&e--}),e>0?(t(i),i.valid=!1):n(i))}},c=function(t){var r=t.cqs,u=0;r&&t.cqsName.forEach(function(n){twyne.consumerController.addressFields.indexOf(n)===-1||r[n].valid||u++});u===0?n(t):i(t)},l=function(n){n.placement.hideInvalidAddressOverride?c(n):i(n)},r=function(n){var t=!1,i=n.cqs;return i&&n.cqsName.forEach(function(i){twyne.consumerController.addressFields.indexOf(i)!==-1&&n.cqs[i].required&&(t=!0)}),t},u=function(n){var t=!1;return n.cqs&&n.cqsName.forEach(function(i){twyne.consumerController.addressFields.indexOf(i)===-1&&n.cqs[i].isVisible&&(t=!0)}),t},a=function(n){if(n.cqs)for(var t of twyne.consumerController.addressFields)if(t in n.cqs&&n.cqs[t].isVisible)return!0;return!1},f=function(n){var r=n.cqs,i,t;return i=n.addressValidationType==="full"?twyne.consumerController.validations.addressValidation==="False":n.addressValidationType==="partial"?twyne.consumerController.validations.zipValidation==="False":!1,t=!1,r&&i&&n.cqsName.forEach(function(i){twyne.consumerController.addressFields.indexOf(i)!==-1&&n.cqs[i].cqControl.value!==""&&(t=!0)}),t};return{validateAddress:function(n){e(n);l(n)},someAddressFieldIsVisible:function(n){return a(n)},showAllAddressFields:function(n){t(n)}}}()});Offer.events={leadSended:"offer_sended",statusChange:"status_change",displayChange:"display_change",acceptComplete:"accept_completed",noClick:"no_click",validationStatusChange:"validation_status_change",noInteraction:"no_interaction"};Offer.prototype.defineInitialStatus=function(n){this.status=n?this.clickId===0?twyne.offerTypes.Fetched:twyne.offerTypes.Completed:this.hasPreping?twyne.offerTypes.NeedsPreping:twyne.offerTypes.Backup;this.setAttribute("status",this.status);twyne.debug.log("Offer "+this.id+" state: "+this.status)};Offer.prototype.changeStatus=function(n){var i=this.status,t;this.status=n;t={offer:this,oldStatus:i};n===twyne.offerTypes.Removed&&this.hide();this.setAttribute("status",this.status);this.dispatcher.perform(Offer.events.statusChange,t)};Offer.prototype.mapContainer=function(){var n=this.placement.container.querySelector("#twy-campaign"+this.id);n&&(this.offerContainer=n,this.isOpenOffer=this.offerContainer.hasAttribute("twy-open"))};Offer.prototype.setAttribute=function(n,t){this.offerContainer&&n&&this.offerContainer.setAttribute(n,t)};Offer.prototype.mapTcpa=function(){if(this.offerContainer){var n=this.offerContainer.querySelector(".twy-tcpa");n?(this.tcpaOpen=!1,this.hasTcpa=!0,this.tcpa=n,twyne.utils.hideElement(this.tcpa)):this.hasTcpa=!1}};Offer.prototype.mapMoreInfo=function(){var t,n;this.offerContainer&&(t=this.offerContainer.querySelector("#twy-more-info-container"),t&&(this.moreInfoContainer=t,twyne.utils.cssHideElement(this.moreInfoContainer),n=function(n,t){twyne.utils.stateToogleClass(n,t)},this.moreinfo=this.offerContainer.querySelector("#twy-more-info"),this.moreinfo&&this.moreinfo.addEventListener("click",function(){n(this.lessInfo,!0);n(this.moreinfo,!1);n(this.moreInfoContainer,!0)}.bind(this)),this.lessInfo=this.offerContainer.querySelector("#twy-less-info"),this.lessInfo&&(twyne.utils.cssHideElement(this.lessInfo),this.lessInfo.addEventListener("click",function(){n(this.moreinfo,!0);n(this.lessInfo,!1);n(this.moreInfoContainer,!1)}.bind(this)))))};Offer.prototype.mapCqs=function(){var e=this.placement.container.querySelector("#twy-div-customquestions"+this.id),n,u,t,i,f,r;if(e){if(this.cqContainer=e,this.placement.cqsRequired&&(n=twyne.htmlFactory.cqsRequiredTitleMessage(this.id,this.placement),this.cqContainer.insertAdjacentHTML("afterbegin",n.html),this.cqDefaultError=document.getElementByTwyneId(n.id),n=twyne.htmlFactory.cqsRequiredErrorMessage(this.id,this.placement),this.cqContainer.insertAdjacentHTML("beforeend",n.html),this.cqErrorMessage=document.getElementByTwyneId(n.id),u=twyne.htmlFactory.cqsRequiredSuccessMessage(this.id,this.placement),this.cqContainer.insertAdjacentHTML("beforeend",u.html),this.cqSuccessMessage=document.getElementByTwyneId(u.id)),this.cqs={},t=this.cqContainer.querySelectorAll(".twy-customquestion"),t&&t.length)for(i=0;i<t.length;i++)f=new CustomQuestion(t[i],this),this.cqs[f.cqType]=f;for(this.cqsArray=Object.values(this.cqs),this.hasCqs=this.cqsArray.length>0,r=0;r<this.cqsArray.length;r++)this.cqsArray[r].on(CustomQuestion.events.statusChange,this.checkIsValid.bind(this));this.valid=this.customQuestionsAreValid();this.setValidClass();twyne.consumerController.on(Consumer.events.customQuestionPropertyChanged,this.customQuestionPropertyChanged.bind(this));twyne.consumerController.on(Consumer.events.addressFieldChanged,this.addressFieldChanged.bind(this))}else this.valid=!0,this.setValidClass()};Offer.validationClasses={cqContainer:{valid:"twy-valid-container-custom-field",invalid:"twy-invalid-container-custom-field"},offer:{valid:"twy-offer-valid",invalid:"twy-offer-invalid"}};Offer.prototype.setValidClass=function(){twyne.utils.stateToogleClass(this.offerContainer,this.valid,Offer.validationClasses.offer.valid,Offer.validationClasses.offer.invalid);this.cqErrorMessage&&this.cqSuccessMessage&&(twyne.utils.stateToogleClass(this.cqErrorMessage,!this.valid),twyne.utils.stateToogleClass(this.cqSuccessMessage,this.valid))};Offer.prototype.mapHiddenCqs=function(){var n,t,i;if(this.cqContainer&&(n=this.cqContainer.querySelectorAll("[type=hidden]"),n.length>0))for(this.hiddenValues={},t=0;t<n.length;t++)i=n[t].getAttribute("twyfieldtype"),i===undefined&&(i=n[t].name),this.hiddenValues[i]=n[t].value};Offer.prototype.hide=function(){twyne.utils.hideElement(this.offerContainer);this.dispatcher.perform(Offer.events.displayChange,{offer:this,actualDisplay:"Hide"})};Offer.prototype.show=function(n){twyne.utils.showElement(this.offerContainer);this.dispatcher.perform(Offer.events.displayChange,{offer:this,actualDisplay:"Show",offerIndex:n})};Offer.prototype.showTcpa=function(){this.hasTcpa&&(twyne.utils.showElement(this.tcpa),this.tcpaOpen=!0)};Offer.prototype.showCqs=function(){var i,r,u,n,t,f;if(!this.hasCqs)return!1;i=0;r=this.cqs.address2;for(u in this.cqs)n=this.cqs[u],n.isVisible&&(t={showCQ:!0,cqType:n.cqType,campaignId:this.id,input:n.cqControl,fieldId:n.fieldId,container:n.container,consumerValue:n.consumerValue},twyne.consumerController.dispatcher.perform(Consumer.events.beforeShowCQ,t),t.showCQ&&(i++,n.show(),u==="address1"&&r&&r.show()),delete t.showCQ,twyne.consumerController.dispatcher.perform(Consumer.events.afterShowCQ,t),n.setValueValidClass(n.isInvalidValue));return f=i>0,f&&twyne.utils.showElement(this.cqContainer),f};Offer.prototype.hasVisibleCqs=function(){for(var n in this.cqs)if(this.cqs[n].open||this.cqs[n].isVisible)return!0;return!1};Offer.prototype.colapse=function(){this.tcpaOpen&&(twyne.utils.hideElement(this.tcpa),this.tcpaOpen=!1);twyne.utils.hideElement(this.cqContainer)};Offer.prototype.tryComplete=function(n,t){return t=typeof t=="function"?t:function(){},this.http.fetching||this.http.print.done||this.http.preping.fail?!1:this.status===twyne.offerTypes.Fetched||this.status===twyne.offerTypes.Backup?(this.fetchClickId(),!0):this.status===twyne.offerTypes.NeedsPreping?(this.preping(n,t),!0):!1};Offer.prototype.fetchClickId=function(){this.http.fetching=!0;var n=function(){this.http.print.done=!0;this.http.fetching=!1;this.setAttribute("print","error");this.changeStatus(twyne.offerTypes.Invalid);this.registerMark("print returned error")}.bind(this),t=function(n){this.http.print.done=!0;this.clickId=n;this.http.fetching=!1;this.setAttribute("print","success");this.changeStatus(twyne.offerTypes.Completed);this.registerMark("print returned ok, with click "+n)}.bind(this),i=twyne.endpoints.serving.api.post("print").setTimeout(twyne.endpoints.timeouts.fetchClickId).onError(n).onTimeout(n).onSuccess(function(i){i>0?t(i):n()});this.http.preping.fail||(this.registerMark("print request"),i.send({OfferId:this.displayId,Sid:this.placement.seed.sourceId,Pid:this.placement.seed.impressionId}))};Offer.prototype.preping=function(n,t){this.http.fetching=!0;var i=function(){this.http.fetching=!1;this.setAttribute("preping","timeout");this.http.preping.timeout=!0;this.placement.config.hideOnTimeout?this.changeStatus(twyne.offerTypes.Invalid):this.changeStatus(twyne.offerTypes.Fetched);this.registerMark("preping request had a timeout of "+twyne.endpoints.timeouts.preping+" ms")}.bind(this),r=function(n){this.http.fetching=!1;this.setAttribute("preping","error");this.changeStatus(twyne.offerTypes.Fetched);this.registerMark("preping request error");n&&this.setAttribute("preping_response",n.status)}.bind(this),u=function(){this.http.fetching=!1;this.http.preping.fail=!0;this.setAttribute("preping","not-show");this.changeStatus(twyne.offerTypes.Invalid);this.registerMark("preping returned no")}.bind(this),f=function(i){this.placement.arrayOffers.some(function(n){return this.associatedOffers&&this.associatedOffers.includes(n.id)&&n.status==twyne.offerTypes.Completed&&this.placement.arrayOffers.indexOf(this)>this.placement.arrayOffers.findIndex(function(t){return t.id==n.id})},this)||(this.http.fetching=!1,this.setAttribute("preping","show"),e(),n?(this.clickId=i,this.changeStatus(twyne.offerTypes.Completed),this.registerMark("preping returned yes, with click "+i)):(this.changeStatus(twyne.offerTypes.Fetched),this.registerMark("preping returned yes")),t())}.bind(this),e=function(){var n,t;if(this.associatedOffers&&this.associatedOffers.length>0)for(n=0;n<this.associatedOffers.length;n++){const i=this.placement.arrayOffers.findIndex(function(t){return t.id===this.associatedOffers[n]},this);t=this.placement.arrayOffers[i];i!==-1&&t.changeStatus(twyne.offerTypes.Associated)}}.bind(this),o=twyne.endpoints.serving.api.post("campaigns/preping/").setTimeout(twyne.endpoints.timeouts.preping).onError(r).onTimeout(i).onSuccess(function(n){typeof n!="number"&&(n=parseInt(n,10));n>0?f(n):u()});this.http.preping.fail||(this.registerMark("preping request"),o.send({Cid:this.id,OfferId:this.displayId,FetchClickId:n,Sid:this.placement.seed.sourceId,Pid:this.placement.seed.impressionId,Consumer:twyne.consumerController.id}))};Offer.prototype.openLinkout=function(n){var f=function(){var n=window.navigator.userAgent;return n.indexOf("FBAN")!==-1||n.indexOf("FBAV")!==-1},e=function(){var n=window.navigator.userAgent;return n.indexOf("wv")!==-1},r=function(n){return n=="tab"||n=="newWindow"?!e()&&!f():!0},t=function(n,t){if(r("newWindow")){var f=window.innerWidth/100*t.width|0,e=window.innerHeight/100*t.height|0,i=window.open(n+"&redirectMethod=new_window","linkout","width="+f+",height="+e);(!i||i.closed)&&u(n)}else u(n)},o=function(n,i){if(r("tab")){var u=window.open(n+"&redirectMethod=tab","_blank");(!u||u.closed)&&t(n,i)}else t(n,i)},u=function(n){window.twyne.suppressRedirect=!0;window.location.href=n+"&redirectMethod=current_window"},i=twyne.baseUrl+n+"&clid="+this.clickId;this.placement.linkoutOffersSetup===undefined&&window.open(i,"_blank","linkout");this.placement.linkoutOffersSetup.windowRedirect?t(i,this.placement.linkoutOffersSetup):o(i);this.setAttribute("clicked",!0);this.registerMark("open linkout")};Offer.prototype.sendNoClick=function(){if(this.clickId&&this.clickId!==0&&!this.sended&&!this.http.fetching){this.http.fetching=!0;var i={source:this.placement.seed.sourceId,impression:this.placement.seed.impressionId},r=this.getAcceptData(),u=twyne.consumerController.getValues(),n=Object.assign(i,u,r),f=function(){this.sucess=!0;this.sending=!1;this.http.fetching=!1;this.notifyNoClickResponse(!0,n)}.bind(this),t=function(){this.http.fetching=!1;this.sending=this.sucess=!1;this.notifyNoClickResponse(!1,n)}.bind(this),e=twyne.utils.querySerializer(n),o=twyne.endpoints.serving.api.post("no?"+e);o.onError(t).onTimeout(t).onSuccess(f).send();this.sended=!0;this.setAttribute("no-click","sended");this.registerMark("send no click")}};Offer.prototype.sendLead=function(){if(this.clickId&&this.clickId!==0&&!this.sended&&!this.http.fetching){this.http.fetching=!0;var i={source:this.placement.seed.sourceId,impression:this.placement.seed.impressionId},r=this.getAcceptData(),u=twyne.consumerController.getValues(),n=Object.assign(i,u,r);twyne.isOptout&&(n=Consumer.cleanPersonalInformation(n));n.leadid=twyne.getLeadId();n.xxTrustedFormCertUrl=twyne.getTrustedForm();n.recordingConsent=twyne.recordingConsent;var f=function(){this.sucess=!0;this.sending=!1;this.http.fetching=!1;this.notifyAcceptResponse(!0,n)}.bind(this),t=function(){this.http.fetching=!1;this.sending=this.sucess=!1;this.notifyAcceptResponse(!1,n)}.bind(this),e=twyne.utils.querySerializer(n),o=twyne.endpoints.serving.api.post("yes?"+e);o.onError(t).onTimeout(t).onSuccess(f).send();this.sended=!0;this.setAttribute("lead","sended");this.registerMark("send lead");this.dispatcher.perform(Offer.events.leadSended,{offer:this})}};Offer.prototype.notifyAcceptResponse=function(n,t){this.dispatcher.perform(Offer.events.acceptComplete,{offer:this,requestData:t,responseStatus:n})};Offer.prototype.notifyNoClickResponse=function(n,t){this.dispatcher.perform(Offer.events.noClick,{offer:this,requestData:t,responseStatus:n})};Offer.prototype.getAcceptData=function(){var n={campaign:this.id,click:this.clickId},t,i,r;for(t in this.cqs)i=this.cqs[t].getValue(),i&&(n[t]=i);for(r in this.hiddenValues)n[r]=this.hiddenValues[r];return n};Offer.prototype.customQuestionsAreValid=function(){for(var n=0;n<this.cqsArray.length;n++)if(!this.cqsArray[n].valid)return!1;return!0};Offer.prototype.checkIsValid=function(){this.valid!==this.customQuestionsAreValid()&&(this.valid=!this.valid,this.setValidClass(),this.dispatcher.perform(Offer.events.validationStatusChange,this))};Offer.prototype.focusFirstInvalidCustomQuestion=function(){this.cqContainer.scrollIntoView();var n=this.getInvalidCustomQuestions();switch(n.length>0&&n[0].htmlType){case"text":case"textarea":n[0].cqControl.focus()}};Offer.prototype.getInvalidCustomQuestions=function(){for(var t=[],n=0;n<this.cqsArray.length;n++)this.cqsArray[n].isValid()||t.push(this.cqsArray[n]);return t};Offer.prototype.setCustomQuestionsRequiredEffect=function(){for(var n=0;n<this.cqsArray.length;n++)this.cqsArray[n].setValidationClass()};Offer.prototype.setValidationClass=function(){twyne.utils.stateToogleClass(this.cqContainer,this.valid,Offer.validationClasses.cqContainer.valid,Offer.validationClasses.cqContainer.invalid)};Offer.prototype.registerMark=function(n){this.placement.registerMark("("+this.id+") "+n)};Offer.prototype.on=function(n,t){this.dispatcher.on(n,t)};Offer.prototype.customQuestionPropertyChanged=function(n){var t=function(n){return this.cqs[n]!==undefined}.bind(this);t(n.cqName)&&this.cqs[n.cqName].validateCustomQuestion()};Offer.prototype.addressFieldChanged=function(n){var t=function(n){for(var t=0;t<n.length;t++)if(n[t].cqName==="address1")return!0;return!1},i=function(){t(n)&&this.cqs.address2!==undefined&&!this.cqs.address2.alwaysVisible&&(this.cqs.address2.isVisible=!1)}.bind(this);i();twyne.offerAddressValidation.someAddressFieldIsVisible(this)&&twyne.offerAddressValidation.showAllAddressFields(this)};Offer.prototype.mapButtons=function(){this.yesInput=document.getElementByTwyneId("twyinputyes-"+this.id);this.noInput=document.getElementByTwyneId("twyinputno-"+this.id)};Offer.prototype.mapInputType=function(){this.inputType=!this.noInput&&this.yesInput&&this.yesInput.type=="checkbox"?"checkbox":"radio"};Object.defineProperty(window.twyne,"hideAutomaticallyButton",{writable:!1,enumerable:!1,configurable:!1,value:function(){var n=function(n,t,i){var u=document.getElementByTwyneId("hide-automatically-button-"+n.id),r;u||(r=twyne.htmlFactory.createHideAutomaticallyButton(n.id,t),n.cqContainer.insertAdjacentHTML("beforeend",r),n.continueButton=document.getElementByTwyneId("hide-automatically-button-"+n.id),n.continueButton.addEventListener("click",function(){i(n)}))},t=function(t,i,r){t.valid?(t.continueButton||n(t,i,r),t.continueButton.offsetParent===null&&twyne.utils.cssShowElement(t.continueButton)):t.continueButton&&twyne.utils.cssHideElement(t.continueButton)};return{mapOffers:function(i,r,u,f){i.forEach(function(i){i.isLinkout||i.yesInput.addEventListener("click",function(){if(i.valid||u)n(i,r,f);else i.on(Offer.events.validationStatusChange,function(){t(i,r,f)}.bind(this))})})}}}()});PrivacyModal.prototype.mapModal=function(n){this.initBtn=document.getElementById("initBtn-"+n);this.modal=document.getElementById("twy-modal-"+n);this.faqsContent=document.querySelectorAll(".faq-content-"+n);this.questions=document.querySelectorAll(".faq-container-"+n+' input[type="checkbox"]')};PrivacyModal.prototype.startModal=function(){if(this.initBtn&&this.initBtn.addEventListener("click",function(){twyne.utils.openModal(this.modal,function(){this.closeQuestions()}.bind(this))}.bind(this)),this.questions){var n=this.faqsContent;this.questions.forEach(function(t){t.addEventListener("change",function(t){n.forEach(function(n){n.id==="faq-content-"+t.target.id&&twyne.utils.stateToogleClass(n,t.target.checked)})})})}};PrivacyModal.prototype.closeQuestions=function(){this.questions.forEach(function(n){n.checked&&(n.checked=!1,n.dispatchEvent(new Event("change")))})};Placement.events={offers:{click:"offer_click",leadClick:"offer_lead_click",linkoutClick:"offer_linkout_click",statusChange:"offer_status_change",displayChange:"offer_display_change"},html:{start:"onstart",complete:"oncomplete",offerSend:"onitemsend",offerClick:"onitemclick",offerShow:"onshowoffer"},destroy:"placement_destroyed",placementCompleted:"placement_completed",userContinueClick:"user_continue_button_click",userSingleNextOfferClick:"user_single_next_offer_click",offerProgress:"offer_progress"};Placement.prototype.mapDomEvents=function(){setupEvent=function(n){n in this.seed&&(delete this.seed[n],this.element.addEventListener(n,function(n){var t=eventEvaluation.bind(n);t(n.target.getAttribute(n.type))}))}.bind(this);for(var n in Placement.events.html)setupEvent(Placement.events.html[n])};Placement.prototype.buildAdserve=function(){var n,t,i;this.initialized||(this.initialized=!0,twyne.inPreviewMode||(n=twyne.endpoints.style.placement(this.seed.pid,this.seed.sid),twyne.utils.insertCss(n)),t='<div id="'+this.containerId+'" class="'+twyne.contentContainerId+'"><\/div>',twyne.utils.insertHtml(t,this.element),this.container=document.getElementByTwyneId(this.containerId),i=twyne.endpoints.serving.index(this.seed),twyne.utils.insertJs(i,this.container),this.createLoaderContent())};Placement.prototype.destroy=function(){this.dispatcher.perform(Placement.events.destroy,this);this.dispatcher.clear();this.container.parentNode.removeChild(this.container)};Placement.prototype.createLoaderContent=function(){if(twyne.loading.enabled){var n=twyne.htmlFactory.createLoadingHTML(twyne.loading.type,twyne.loaderLayerId+this.id),t=twyne.endpoints.style.loader();twyne.utils.insertHtml(n,this.container);twyne.utils.insertCss(t)}};Placement.prototype.startAdserve=function(n,t){if(t){this.startPlacementInfo(t);this.saveCompliance(this.seed.impressionId);this.startOffers(n);this.displayType=window.twyne.createServingType(this);this.displayType.start&&(this.displayType.start(),this.fireDOMEvent(Placement.events.html.start));var i=this.container.querySelector(".twy-optout-link");i&&this.mapOptout(i);(this.showPrivacyInformations||this.defaultShowPrivacyInformations)&&(this.modal=new PrivacyModal(this.id));twyne.mergeData.checkTemplate("twy-adserve-title-"+this.id,twyne.consumerController)}};Placement.configMap={1:"sourceId",3:"redirectUrl",4:"publisherId",5:"impressionId",6:"isSingleOffer",7:"cqErrorMessage",8:"cqDefaultMessage",9:"maxVisibleOffers",10:"cqSuccessMessage",11:"continueButtonCss",12:"cqRequiredMessage",13:"hideCampaignOnNoSelect",14:"overrideAddressVisibility",15:"areCustomQuestionsRequired",16:"areRequiredClickOnAllOffers",17:"defaultShowPrivacyInformations",18:"prepingTimeout",19:"hideOnTimeout",20:"linkoutType",21:"linkoutWindow",22:"automaticallyHideCqs",23:"automaticallyHideCqsButtonName",24:"automaticallyHideCqsContinueAlwaysVisible",13:"hideCampaignOnNoSelect",33:"hideCampaignOnSend",35:"stackInsertContinueButton",36:"anuraCheck",37:"showSpinnerBetweenOffers",99:"enableHistory"};Placement.prototype.startPlacementInfo=function(n){for(var i,t=0;t<n.length;t++)i=n[t],i.Id in Placement.configMap&&(this.config[Placement.configMap[i.Id]]=i.Value);this.offerContainer=document.getElementByTwyneId("twy-campaigns-"+this.id);this.showPrivacyInformations=this.seed.showPrivacyInformations==="True";this.seed.sourceId=parseInt(this.config.sourceId);this.seed.publisherId=parseInt(this.config.publisherId);this.seed.impressionId=parseInt(this.config.impressionId);this.config.hideOnTimeout=this.config.hideOnTimeout==="True";this.config.enableHistory=this.config.enableHistory==="True";this.config.automaticallyHideCqs=this.config.automaticallyHideCqs==="True";this.config.automaticallyHideCqsContinueAlwaysVisible=this.config.automaticallyHideCqsContinueAlwaysVisible==="True";this.cqsRequired=this.config.areCustomQuestionsRequired==="1";this.hideInvalidAddressOverride=this.config.overrideAddressVisibility==="1";this.defaultShowPrivacyInformations=this.config.defaultShowPrivacyInformations==="True";this.config.prepingTimeout&&(twyne.endpoints.timeouts.preping=parseInt(this.config.prepingTimeout));this.fillLinkoutConfigs();this.timeline.push(" ["+(new Date).toTimeString()+"] start")};Placement.prototype.fillLinkoutConfigs=function(){if(this.linkoutOffersSetup={windowRedirect:this.config.linkoutType==="0"},this.linkoutOffersSetup.windowRedirect){var n=this.config.linkoutWindow.split(",");this.linkoutOffersSetup.width=parseInt(n[0],10);this.linkoutOffersSetup.height=parseInt(n[1],10)}};Placement.prototype.saveCompliance=function(n){var r=function(){this.registerMark("Was an error to save compliance data.")}.bind(this),u=function(){this.registerMark("Compliance data was save succefuly.")}.bind(this),t={RegistrationLeadId:twyne.registrationLeadId,RegistrationTrustedFormId:twyne.registrationTrustedForm},i;for(i in t)t[i]||delete t[i];twyne.endpoints.serving.complianceApi.post(n+"/save").onError(r).onTimeout(r).onSuccess(u).send(t)};Placement.prototype.fireDOMEvent=function(n,t){var r={placementId:this.id,sourceId:this.seed.sourceId,publisherId:this.seed.publisherId},i;t||(t={});i=twyne.utils.createEvent(n,Object.assign(r,t));this.element.dispatchEvent(i)};Placement.prototype.mapOptout=function(n){n.addEventListener("click",function(){var n,t,i,r;if(this.jsLoaded&&this.htmlLoaded){twyne.utils.openModal(this.optOutModal);return}this.jsLoaded!==!1&&this.htmlLoaded!==!1&&(n=this,this.jsLoaded=this.htmlLoaded=!1,t=function(){n.jsLoaded&&n.htmlLoaded&&(n.optOutModal=n.container.querySelector(".twy-optout-form"),n.optout=twyne.mapOptoutForm(n.id),n.optout.start(),twyne.utils.openModal(n.optOutModal))},twyne.utils.injectJs(twyne.baseUrl+"/assets/optout.js",function(){n.jsLoaded=!0;t()}),i=this.getSegmentedOffers(),r=twyne.utils.querySerializer({placementId:this.id,clickId:i.completes[0].clickId,consumerId:twyne.consumerController.id,publisherImpressionDetailId:this.seed.impressionId}),twyne.endpoints.serving.api.get("optout/form?"+r).onSuccess(function(i){n.htmlLoaded=!0;n.container.insertAdjacentHTML("beforeend",i);t()}).send())}.bind(this))};Placement.prototype.startOffers=function(n){var i,r,t;if(this.offers={},this.arrayOffers=[],this.offersInitialInfo=n,this.offersInitialInfo){for(i=0;i<this.offersInitialInfo.length;i++){r=this.offersInitialInfo[i];twyne.mergeData.checkOffer(r.Campaignid,twyne.consumerController);t=new Offer(r,this);this.offers[r.Campaignid]=t;this.arrayOffers.push(t);t.on(Offer.events.statusChange,function(n){this.dispatcher.perform(Placement.events.offers.statusChange,n)}.bind(this));t.on(Offer.events.displayChange,function(n){this.dispatcher.perform(Placement.events.offers.displayChange,n);n.actualDisplay=="Show"&&this.fireDOMEvent(Placement.events.html.offerShow,{offerId:n.offer.id,offerIndex:n.offerIndex,offerContainer:n.offer.offerContainer})}.bind(this));t.on(Offer.events.acceptComplete,function(n){this.fireDOMEvent(Placement.events.html.offerSend,{offerId:n.offer.id,offerData:n.requestData})}.bind(this))}this.hasOffers=this.offersInitialInfo.length>0}};Placement.prototype.getSegmentedOffers=function(){return this.hasOffers?{completes:this.arrayOffers.filter(function(n){return n.status===twyne.offerTypes.Completed}),getIncompleteOffers:function(){return this.fetches.concat(this.prepings,this.backups)},fetches:this.arrayOffers.filter(function(n){return n.status===twyne.offerTypes.Fetched&&n.http.fetching!==!0&&n.http.preping.fail!==!0}),prepings:this.arrayOffers.filter(function(n){return n.status===twyne.offerTypes.NeedsPreping&&n.http.fetching!==!0}),backups:this.arrayOffers.filter(function(n){return n.status===twyne.offerTypes.Backup&&n.http.fetching!==!0&&n.http.preping.fail!==!0}),invalids:this.arrayOffers.filter(function(n){return n.status===twyne.offerTypes.Invalid||n.http.preping.fail===!0})}:undefined};Placement.prototype.processLead=function(n,t){var i=this.offers[n];i&&(this.dispatcher.perform(Placement.events.offers.leadClick,{offer:i,optinType:t}),this.notifyClickOffer(i,t),i.optinType=t)};Placement.prototype.processLinkout=function(n,t,i){var r=this.offers[n];r&&r.isLinkout&&(this.notifyClickOffer(r,i),this.dispatcher.perform(Placement.events.offers.linkoutClick,{offer:r,optinType:i,redirectUrl:t}),r.optinType=i)};Placement.prototype.notifyClickOffer=function(n,t){this.dispatcher.perform(Placement.events.offers.click,{offer:n,optinType:t});this.fireDOMEvent(Placement.events.html.offerClick,{offerId:n.id,booleanOptinType:t,optinType:t?"yes":"no"})};Placement.prototype.sendComplete=function(){var t,n;this.sendedComplete||(this.sendedComplete=!0,t=this.getSegmentedOffers(),this.updateSlots(t),n=function(){window.clearInterval(this.completeTimeout);var n={status:"completed",placementId:this.id,numberOfOffers:t.completes.length};this.dispatcher.perform(Placement.events.placementCompleted,n);this.fireDOMEvent(Placement.events.html.complete,n)}.bind(this),twyne.endpoints.serving.api.post("complete").onSuccess(n).onError(n).onTimeout(n).send({Pid:this.seed.impressionId,PrintedOffers:t.completes.length}),this.completeTimeout=setTimeout(n,twyne.endpoints.timeouts.complete),this.registerMark("That's all Folks!"))};Placement.prototype.updateSlots=function(n){var i,r,t;if(n=n||this.getSegmentedOffers(),i=document.getElementByTwyneId(this.id),i&&n.completes.length>0){for(this.orderedClicks=[],r=0;r<i.children.length;r++)for(t=0;t<n.completes.length;t++)if(n.completes[t].offerContainer===i.children[r]){this.orderedClicks.push(n.completes[t].clickId);break}twyne.endpoints.serving.api.post("updateSlot").send({OrderedClicks:this.orderedClicks.join(",")})}};Placement.prototype.registerMark=function(n){if(n){var t=new Date,i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+t.getMilliseconds();this.timeline.push(" ["+i+"] "+n)}};Placement.prototype.logHistory=function(){if(this.config.enableHistory){var n={offers:[],impressionId:this.seed.impressionId,timeline:this.timeline};this.arrayOffers.forEach(function(t){if(t.status===twyne.offerTypes.Completed){var i="";t.optinType===!0&&(i=" [Yes]");t.optinType===!1&&(i=" [No]");n.offers.push(t.id+i)}});n.offers=n.offers.join(", ");twyne.endpoints.serving.api.post("log/history","json").send(n)}};Placement.prototype.on=function(n,t){this.dispatcher.on(n,t)};Placement.prototype.removeOffer=function(n){const t=this.arrayOffers.findIndex(function(t){return t.id===n});var i=this.arrayOffers[t];t!==-1&&(this.arrayOffers.splice(t,1),i.changeStatus(twyne.offerTypes.Removed))};Stack.completeTypes={byInvalidOfers:1,byAllOffersClicked:2,byUserContinueFlow:3};Stack.prototype.start=function(){var n,t,i,r,u;if(this.mapStruct(),this.placement.hasOffers){for(n=this.placement.getSegmentedOffers(),t=0;t<n.completes.length;t++)this.showOffer(n.completes[t]);if(this.registerOnPlacement(),i=n.getIncompleteOffers(),r=this.maxOffers-Object.keys(this.servedOffers).length,r>0&&i.length>0)for(u=0;u<i.length;u++)if(i[u].tryComplete(!0)&&r--,r<=0)break}else this.complete(Stack.completeTypes.byInvalidOfers);this.nextBtn&&this.nextBtn.addEventListener("click",this.userComplete.bind(this));this.placement.hasOffers&&this.placement.config.automaticallyHideCqs&&twyne.hideAutomaticallyButton.mapOffers(this.placement.arrayOffers,this.placement.config.automaticallyHideCqsButtonName,this.placement.config.automaticallyHideCqsContinueAlwaysVisible,this.hideAutomaticallyCqs.bind(this))};Stack.prototype.mapStruct=function(){var n,t,i,r;this.maxOffers=0;this.servedOffers={};this.clickedOffers=[];twyne.utils.hideElement(this.placement.container);n=this.placement.config.areRequiredClickOnAllOffers;n&&(this.allOffersRequired=n==="1",this.allOffersRequired&&this.createAllOffersRequiredContainer());t=this.placement.config.hideCampaignOnNoSelect;t&&(this.hideOnNoSelected=t==="1");i=this.placement.config.maxVisibleOffers;i&&(this.maxOffers=parseInt(i,10));r=this.placement.config.hideCampaignOnSend;r&&(this.hideOnSend=r==="True");this.placement.config.stackInsertContinueButton&&document.getElementByTwyneId("twy-nextcampaign-"+this.placement.id)&&(this.nextBtn=document.getElementByTwyneId("twy-buttonnext-"+this.placement.id),twyne.utils.showElement(this.nextBtn))};Stack.prototype.createAllOffersRequiredContainer=function(){this.placement.offerContainer.insertAdjacentHTML("beforeend",twyne.htmlFactory.allOffersRequiredErrorMessage(this.placement));this.allOffersRequiredContainer=document.getElementByTwyneId("twy-required-all-offers-error-message-"+this.placement.id)};Stack.prototype.registerOnPlacement=function(){this.placement.on(Placement.events.offers.statusChange,this.offerStatusUpdate.bind(this));this.placement.on(Placement.events.offers.leadClick,this.processLeadOfferClick.bind(this));this.placement.on(Placement.events.offers.linkoutClick,this.processLinkoutOfferClick.bind(this));this.placement.on(Placement.events.offers.click,this.processOfferClick.bind(this));this.placement.on(Placement.events.placementCompleted,this.redirect);this.placement.on(Placement.events.userContinueClick,function(){this.complete(Stack.completeTypes.byUserContinueFlow)}.bind(this))};Stack.prototype.getNextOffer=function(){for(var t=this.placement.arrayOffers,n=0;n<t.length;n++)if(!t[n].clickState&&t[n].status===twyne.offerTypes.Completed)return t[n]};Stack.prototype.hideAutomaticallyCqs=function(n){if(n.clickState&&n.valid){n.sendLead();n.colapse();var t=this.getNextOffer();t&&t.offerContainer.scrollIntoView()}};Stack.prototype.showOffer=function(n){if(this.hasServedOffers||(twyne.utils.hideElement(twyne.loaderLayerId+this.placement.id),twyne.utils.showElement("twy-campaigns-"+this.placement.id),twyne.utils.showElement(this.placement.container)),!this.stackAlreadyCompleted){this.servedOffers[n.id]=n;var t=Object.keys(this.servedOffers).length;n.show(t);n.registerMark("on screen");this.hasServedOffers=!0;this.stackAlreadyCompleted=t>=this.maxOffers}};Stack.prototype.offerStatusUpdate=function(n){var r,t,i;if(n.offer.status===twyne.offerTypes.Invalid)if(r=this.placement.getSegmentedOffers(),t=r.getIncompleteOffers(),t&&t.length>0){for(i=0;i<t.length;i++)if(t[i].tryComplete(!0))break}else r.invalids.length===this.placement.arrayOffers.length&&this.complete(Stack.completeTypes.byInvalidOfers);else n.offer.status===twyne.offerTypes.Fetched?n.offer.tryComplete():n.offer.status===twyne.offerTypes.Completed?this.showOffer(n.offer):n.offer.status===twyne.offerTypes.Associated&&this.placement.removeOffer(n.offer.id)};Stack.prototype.processLeadOfferClick=function(n){if(n.offer.clickState=n.optinType,this.lastClickedOffer)if(this.placement.cqsRequired&&!this.lastClickedOffer.valid)this.lastClickedOffer.on(Offer.events.validationStatusChange,function(n){this.sendLeadOffer(n)}.bind(this));else this.lastClickedOffer.id!==n.offer.id&&(this.lastClickedOffer.colapse(),this.sendLeadOffer(this.lastClickedOffer));if(this.lastClickedOffer=n.offer,n.optinType){if(n.offer.showTcpa(),this.needsValueFromConsumer=n.offer.showCqs(),this.hideOnSend)n.offer.on(Offer.events.leadSended,this.hideOfferWhenSendLead)}else n.offer.colapse(),this.needsValueFromConsumer=!1,this.hideOnSend&&n.offer.dispatcher.off(Offer.events.leadSended,this.hideOfferWhenSendLead),!n.offer||n.offer.sended||n.offer.isLinkout||this.sendNoClick(n.offer)};Stack.prototype.hideOfferWhenSendLead=function(n){n.offer.offerContainer.classList.add("twyne-fade-hide");setTimeout(function(){twyne.utils.cssHideElement(n.offer.offerContainer)},1e3)};Stack.prototype.sendLeadOffer=function(n){return twyne.consumerController.confirmAddressAndZip(),n&&n.clickState&&!n.sended&&!n.isLinkout?(n.sendLead(),!0):!1};Stack.prototype.sendNoClick=function(n){return!n||n.clickState||n.sended||n.isLinkout?!1:(n.sendNoClick(),!0)};Stack.prototype.processLinkoutOfferClick=function(n){n.optinType?n.offer.openLinkout(n.redirectUrl):n.offer.sendNoClick()};Stack.prototype.processOfferClick=function(n){var t,i;n.offer.source_click_flag||this.clickedOffers.push(n.offer);n.offer.source_click_flag=!0;!n.optinType&&this.hideOnNoSelected&&n.offer.hide();t=this.placement.getSegmentedOffers();this.clickedOffers.length===t.completes.length&&(this.allOffersClicked=!0,twyne.suppressAutoComplete===!0||n.offer.hasTcpa&&n.optinType?twyne.suppressAutoComplete!==!0&&n.offer.hasTcpa&&n.optinType&&(i=this,setTimeout(function(){i.complete(Stack.completeTypes.byAllOffersClicked)},2e3)):this.complete(Stack.completeTypes.byAllOffersClicked))};Stack.prototype.userComplete=function(){this.complete(Stack.completeTypes.byUserContinueFlow)};Stack.prototype.complete=function(n){var t=function(){if(this.lastClickedOffer&&this.sendLeadOffer(this.lastClickedOffer))this.lastClickedOffer.on(Offer.events.acceptComplete,function(){this.placement.sendComplete()}.bind(this));else this.placement.sendComplete()}.bind(this);n===Stack.completeTypes.byInvalidOfers?this.placement.sendComplete():this.checkIfOffersValid()&&(this.allOffersRequired&&!this.allOffersClicked?this.showAllOffersRequiredErrorMessage():n!==Stack.completeTypes.byAllOffersClicked||this.needsValueFromConsumer?n===Stack.completeTypes.byUserContinueFlow&&t():t())};Stack.prototype.showAllOffersRequiredErrorMessage=function(){this.allOffersRequiredContainer&&twyne.utils.cssShowElement(this.allOffersRequiredContainer)};Stack.prototype.checkIfOffersValid=function(){var i=function(){for(var i=[],n,t=0;t<this.clickedOffers.length;t++)n=this.clickedOffers[t],n.isLinkout||n.valid||!n.clickState||n.sended!==undefined&&n.sended||i.push(this.clickedOffers[t]);return i}.bind(this),n,t;if(this.placement.cqsRequired&&(n=i(),n.length>0)){for(t=0;t<n.length;t++)n[t].setValidationClass(),n[t].setCustomQuestionsRequiredEffect();return n[0].focusFirstInvalidCustomQuestion(),!1}return!0};Stack.prototype.redirect=function(n){twyne.endAdserve(n)};SingleOffer.completeTypes={byInvalidOfers:1,byAllOffersClicked:2};SingleOffer.prototype.start=function(){if(this.mapStruct(),this.placement.hasOffers){var n=this.placement.getSegmentedOffers(),t=this.maxOffers-n.completes.length;executePreping(this.placement,n,0,t,function(){});this.createThisLoading();this.registerOnPlacement();this.processCurrentOffer();this.nextBtn&&this.nextBtn.addEventListener("click",this.nextButtonClick.bind(this));this.skipBtn&&this.skipBtn.addEventListener("click",this.skipButtonClick.bind(this));this.btnContinueFlow&&this.btnContinueFlow.addEventListener("click",this.markCurrentOffer.bind(this))}else this.complete(SingleOffer.completeTypes.byInvalidOfers)};SingleOffer.prototype.mapStruct=function(){var n,i,r,t,u;this.allOffersRequired=!0;twyne.utils.hideElement(this.placement.container);n=document.getElementByTwyneId("twy-adserve-progress-"+this.placement.id);n&&(this.progressElement=n,this.progressHtml=n.innerHTML,this.hasProgressInfo=this.progressHtml!=="");i=document.getElementByTwyneId("twy-nextcampaign-"+this.placement.id);i&&(this.nextOfferContainer=i,this.changeVisibilityNextContainer(!1),this.nextBtn=document.getElementByTwyneId("twy-buttonnext-"+this.placement.id),twyne.utils.showElement(this.nextBtn),this.skipBtn=document.getElementByTwyneId("twy-buttonskip-"+this.placement.id),twyne.utils.showElement(this.skipBtn));r=this.placement.config.continueButtonCss;r&&(t=document.getElementsByClassName(r),t&&t.length>0&&(this.btnContinueFlow=t[0]));u=this.placement.config.maxVisibleOffers;u&&(this.maxOffers=parseInt(u,10))};SingleOffer.prototype.createThisLoading=function(){var n=document.getElementByTwyneId("twy-campaigns-"+this.placement.id),t;n&&(this.offersContainer=n,this.loadingLayerId=twyne.utils.createGuid(),t=twyne.htmlFactory.createLoadingHTML(twyne.loading.type,this.loadingLayerId),this.offersContainer.insertAdjacentHTML("afterEnd",t))};SingleOffer.prototype.registerOnPlacement=function(){this.placement.on(Placement.events.offers.statusChange,this.offerStatusUpdate.bind(this));this.placement.on(Placement.events.offers.leadClick,this.processLeadOfferClick.bind(this));this.placement.on(Placement.events.offers.linkoutClick,this.processLinkoutOfferClick.bind(this));this.placement.on(Placement.events.offers.click,this.processOfferClick.bind(this));this.placement.on(Placement.events.placementCompleted,this.redirect);this.placement.on(Placement.events.userContinueClick,this.skipButtonClick.bind(this));this.placement.on(Placement.events.offerProgress,this.offerProgress.bind(this))};SingleOffer.prototype.processCurrentOffer=function(){if(this.stackAlreadyCompleted||this.currentOfferIndex>=this.placement.arrayOffers.length){this.complete(SingleOffer.completeTypes.byAllOffersClicked);return}var n=this.placement.arrayOffers[this.currentOfferIndex];switch(n.status){case twyne.offerTypes.Invalid:this.goToNextOffer();break;case twyne.offerTypes.NeedsPreping:this.showLoadingLayer();break;case twyne.offerTypes.Backup:case twyne.offerTypes.Fetched:n.tryComplete();this.showLoadingLayer();break;case twyne.offerTypes.Completed:n.displayed||this.showOffer(n);break;case twyne.offerTypes.Associated:this.placement.removeOffer(n.id)}};SingleOffer.prototype.goToNextOffer=function(){this.hasCqs=!1;this.currentOfferIndex>this.placement.arrayOffers.length&&this.complete(SingleOffer.events.byAllOffersClicked);var n=this.placement.arrayOffers[this.currentOfferIndex];n&&(this.hideFadeOffer(),this.currentOfferIndex++,this.processCurrentOffer())};SingleOffer.prototype.showOffer=function(n){if(!this.stackAlreadyCompleted){this.servedOffers[n.id]=n;var t=Object.keys(this.servedOffers).length;n.show(t);n.showTcpa();n.displayed=!0;n.registerMark("on screen");this.previousOffer=this.currentOffer;this.currentOffer=n;this.updateProgressText(t);this.stackAlreadyCompleted=t>=this.maxOffers;this.firstOfferServed||(this.firstOfferServed=!0,twyne.utils.hideElement(twyne.loaderLayerId+this.placement.id),twyne.utils.showElement(this.placement.container));this.previousOffer&&this.previousOffer.hide();this.showOffersContainer();this.changeVisibilityNextContainer(!1);n.isOpenOffer&&(this.hasCqs=n.showCqs(),this.changeVisibilityNextContainer(!0))}};SingleOffer.prototype.updateProgressText=function(n){var i=this.placement.getSegmentedOffers(),f=i.fetches.length+i.completes.length,t=Math.min(f,this.maxOffers),r=(n/t*100).toFixed(),u;this.hasProgressInfo&&(u=this.progressHtml.replace("{current_number}",n).replace("{total_number}",t).replace("{percent_of_number}",r),this.progressElement.innerHTML=u);this.placement.dispatcher.perform(Placement.events.offerProgress,{currentOfferIndex:n,totalOffers:t,progressionPercentage:r})};SingleOffer.prototype.offerStatusUpdate=function(n){var t,i,r;n.oldStatus===twyne.offerTypes.NeedsPreping&&(n.offer.status===twyne.offerTypes.Invalid||n.offer.status===twyne.offerTypes.Fetched&&n.offer.http.preping.timeout)&&(t=this.placement.getSegmentedOffers(),t.prepings&&(i=this.maxOffers-t.completes.length,executePreping(this.placement,t,0,i,function(){})));n.offer.status===twyne.offerTypes.Invalid&&(r=this.placement.getSegmentedOffers(),r.invalids.length===this.placement.arrayOffers.length&&this.complete(SingleOffer.completeTypes.byInvalidOfers));this.processCurrentOffer()};SingleOffer.prototype.processLeadOfferClick=function(n){if(!n.optinType&&n.offer&&!n.offer.sended&&!n.offer.isLinkout){n.offer.sendNoClick();return}if(this.currentOffer.isOpenOffer)this.sendLeadOffer(n.offer);else{var t=n.offer.hasVisibleCqs();!t&&n.offer.valid?this.sendLeadOffer(n.offer):(this.hasCqs=n.offer.showCqs(),this.changeVisibilityNextContainer(!0))}};SingleOffer.prototype.sendLeadOffer=function(n){twyne.consumerController.confirmAddressAndZip();n.sended||n.isLinkout||n.sendLead()};SingleOffer.prototype.processLinkoutOfferClick=function(n){n.optinType&&n.offer.openLinkout(n.redirectUrl)};SingleOffer.prototype.processOfferClick=function(n){n.optinType||n.offer.sendNoClick();!n.optinType||n.offer.isLinkout?this.goToNextOffer():!this.hasCqs&&n.offer.valid&&this.goToNextOffer()};SingleOffer.prototype.nextButtonClick=function(){var n={target:this.nextBtn,offer:this.currentOffer};this.placement.dispatcher.perform(Placement.events.userSingleNextOfferClick,n);this.currentOffer.valid||this.placement.cqsRequired===!1?this.currentOffer.isOpenOffer?(this.hasCqs=!1,this.markCurrentOffer()):(this.sendLeadOffer(this.currentOffer),this.goToNextOffer()):this.handlerInvalidOffer()};SingleOffer.prototype.handlerInvalidOffer=function(){this.currentOffer.setValidationClass();this.currentOffer.focusFirstInvalidCustomQuestion()};SingleOffer.prototype.skipButtonClick=function(){this.goToNextOffer()};SingleOffer.prototype.markCurrentOffer=function(){var i=this.placement.container.querySelector("#twyinputyes-"+this.currentOffer.id),n,t;i?i.click():(n=this.placement.container.querySelector("twy-campaign"+this.currentOffer.id),n&&(t=n.querySelector(".twy-action"),t?t.click():n.querySelector("a").click()))};SingleOffer.prototype.complete=function(n){n===SingleOffer.completeTypes.byInvalidOfers?this.placement.sendComplete():n===SingleOffer.completeTypes.byAllOffersClicked&&(this.showLoadingLayer(),this.placement.sendComplete())};SingleOffer.prototype.redirect=function(n){twyne.endAdserve(n)};SingleOffer.prototype.showOffersContainer=function(){this.clearLoadingTimeOut();twyne.utils.hideElement(this.loadingLayerId);this.showFadeOffer()};SingleOffer.prototype.showLoadingLayer=function(){this.hideFadeOffer();this.setLoadingTimeOut()};SingleOffer.prototype.clearLoadingTimeOut=function(){this.timerLoading&&twyne.utils.hideElement(this.loadingLayerId);clearTimeout(this.timerLoading);this.timerLoading=!1};SingleOffer.prototype.setLoadingTimeOut=function(){this.timerLoading||(this.timerLoading=setTimeout(function(){this.hideFadeOffer();this.placement.config.showSpinnerBetweenOffers==="True"&&twyne.utils.showElement(this.loadingLayerId)}.bind(this),1e3))};SingleOffer.prototype.setHideTransitionClass=function(){return twyne.transition==="fade"?"twyne-fade-hide":"twy-hide"};SingleOffer.prototype.setShowTransitionClass=function(){return twyne.transition==="fade"?"twyne-fade-show":"twy-show"};SingleOffer.prototype.changeVisibilityNextContainer=function(n){twyne.utils.stateToogleClass(this.nextOfferContainer,n)};SingleOffer.prototype.showFadeOffer=function(){this.offersContainer.classList.remove(this.hideClass);this.offersContainer.classList.add(this.showClass)};SingleOffer.prototype.hideFadeOffer=function(){this.offersContainer.classList.remove(this.showClass);this.offersContainer.classList.add(this.hideClass)};SingleOffer.prototype.offerProgress=function(n){this.offerProgressInfo=n};Object.defineProperty(window.twyne,"createServingType",{writable:!1,enumerable:!1,configurable:!1,value:function(n){"use strict";return twyne.customDisplayType?twyne.customDisplayType:twyne.isFormRegistration?new Form(n):n.config.isSingleOffer==="True"?new SingleOffer(n):new Stack(n)}});Consumer.events={init:"init",afterShowCQ:"afterShowCQ",beforeShowCQ:"beforeShowCQ",customQuestionPropertyChanged:"customQuestionPropertyChanged",addressFieldChanged:"addressFieldChanged"};Consumer.infoMap={1:"age",2:"dob",3:"zip",4:"last",5:"city",6:"first",7:"state",8:"middle",9:"isTest",10:"email",11:"phone",12:"gender",13:"mobile",14:"country",15:"address1",16:"address2",17:"workphone",18:"ipAddress",19:"consumerId",20:"showPrivacyInformations",21:"title",24:"browserLangagues"};Consumer.validations={22:"addressValidation",23:"zipValidation"};Consumer.cleanPersonalInformation=function(n){var t=Object.assign({},n),r,i;for(r in Consumer.infoMap)i=Consumer.infoMap[r],i in t&&delete t[i];return t};Consumer.addressFields=["address1","address2","city","state","zip"];Consumer.prototype.build=function(n){var i,t,r,u;if(!this.initialized){for(this.initialized=!0,this.controls={},this.validations={},i=0;i<n.length;i++)t=n[i],t.Id in Consumer.infoMap&&(r=Consumer.infoMap[t.Id],this.controls[r]={name:r,value:t.Value,valid:t.Value!=="",isVisible:t.Value==="",isAddressField:Consumer.addressFields.indexOf(r)>=0}),t.Id in Consumer.validations&&(u=Consumer.validations[t.Id],this.validations[u]=t.Value);"consumerId"in this.controls&&(this.id=parseInt(this.controls.consumerId.value));this.validateAge();this.dispatcher.perform(Consumer.events.init,null)}};Consumer.prototype.validateAge=function(){var n=this.controls.age,t=n.value!=="0";t||(n.value="");n.valid=t;n.isInvalidValue=!1;n.isVisible=!t};Consumer.prototype.confirmAddressAndZip=function(){this.controls.zip.isInvalidValue=!1;this.controls.address1.isInvalidValue=!1};Consumer.prototype.onChangeProperty=function(n,t){if(this.initialized&&this.controls[n])this.dispatcher.on(n,t)};Consumer.prototype.propertyChanged=function(n,t){var i,u,r;if(this.initialized&&(i=this.controls[n],i))if(i.value=t,this.isAddressField(n)){for(u=[],r=0;r<Consumer.addressFields.length;r++)u.push(this.setValidationOnControl(this.controls[Consumer.addressFields[r]]));this.dispatcher.perform(Consumer.events.addressFieldChanged,u)}else this.setValidationOnControl(i)};Consumer.prototype.setValidationOnControl=function(n){n.valid=n.value?!0:!1;n.isVisible=!n.valid;var t={cqName:n.name,newValue:n.value};return this.dispatcher.perform(Consumer.events.customQuestionPropertyChanged,t),t};Consumer.prototype.getValues=function(){var t,n;if(this.initialized){t={};for(n in this.controls)this.controls[n].value&&(t[n]=this.controls[n].value);return t}};Consumer.prototype.getProperty=function(n){if(this.initialized)return this.controls[n]?this.controls[n]:void 0};Consumer.prototype.isCommonProperty=function(n){if(this.initialized)return this.controls[n]!==undefined};Consumer.prototype.on=function(n,t){this.dispatcher.on(n,t)};Consumer.prototype.isAddressField=function(n){return Consumer.addressFields.indexOf(n)!==-1};Object.defineProperty(window.twyne,"debug",{writable:!1,enumerable:!1,configurable:!1,value:function(){var t="twdbg",n="#31d090",i=["#e3b04b","#0c9463","#6fb98f","#e25822","#fd7792","#c355f5","#ff0000"],r=function(){return localStorage.getItem(t)},u=function(){var n=r();return n&&f(n),n},f=function(n){var r,t,u,f;for(n.indexOf("c")>-1&&o(),r=Object.values(twyne.placements),t=0;t<r.length;t++)u=r[t],f=i[t],n.indexOf("p")>-1&&s(u,f),n.indexOf("o")>-1&&h(u,f)},e=function(){twyne.debug.log("\n████████╗██╗    ██╗██╗   ██╗███╗   ██╗███████╗   \n╚══██╔══╝██║    ██║╚██╗ ██╔╝████╗  ██║██╔════╝   \n   ██║   ██║ █╗ ██║ ╚████╔╝ ██╔██╗ ██║█████╗     \n   ██║   ██║███╗██║  ╚██╔╝  ██║╚██╗██║██╔══╝     \n   ██║   ╚███╔███╔╝   ██║   ██║ ╚████║███████╗██╗\n   ╚═╝    ╚══╝╚══╝    ╚═╝   ╚═╝  ╚═══╝╚══════╝╚═╝\n                                                 \n* You enable the adserve debug.","#31d090")},o=function(){twyne.consumerController.on(Consumer.events.init,function(){try{twyne.debug.log("The consumer was started. InitialValues:");console.table(twyne.consumerController.controls)}catch(n){return}});for(var t in twyne.seed)twyne.consumerController.onChangeProperty(t,function(i){twyne.debug.log("The consumer value "+t+" has changed to new value: "+i,n)});twyne.consumerController.on(Consumer.events.beforeShowCQ,function(t){twyne.debug.log("The custom question "+t.cqType+" of campaign "+t.campaignId+" will be showed.",n)}.bind(this))},s=function(n,t){n.on(Placement.events.offers.statusChange,function(n){twyne.debug.log("The offer id "+n.offer.id+" changed status of "+n.oldStatus+" to "+n.offer.status,t)});n.on(Placement.events.offers.click,function(n){twyne.debug.log("There was a "+n.optinType+" click on offert "+n.offer.id+".",t)});n.on(Placement.events.placementCompleted,function(n){twyne.debug.log("The placement are completed with "+n.numberOfOffers+" offers.",t)});n.on(Placement.events.userContinueClick,function(){twyne.debug.log("User click on continue. The placement start now the complete flow.",t)}.bind(this));n.on(Placement.events.offerProgress,function(n){twyne.debug.log("The placement is now on index "+n.currentOfferIndex+" of "+n.totalOffers+" representing "+n.progressionPercentage+"%",t)}.bind(this))},h=function(n,t){if(n.arrayOffers)for(var i=0;i<twyne.placementController.arrayOffers.length;i++){n.arrayOffers[i].on(Offer.events.displayChange,function(n){twyne.debug.log("The offer "+n.offer.id+" changed display status to "+n.actualDisplay,t)});n.arrayOffers[i].on(Offer.events.acceptComplete,function(n){twyne.debug.log("The offer "+n.offer.id+" had the complete response complete with response status: "+n.responseStatus,t)});n.arrayOffers[i].on(Offer.events.noClick,function(n){twyne.debug.log("The offer "+n.offer.id+" had the no-click request complete with response status: "+n.responseStatus,t)})}};return{start:function(){try{this.stopRedirect=!1;this.allowedAloneDebug=!1;var n=u();n&&(this.stopRedirect=n.indexOf("s")>-1,this.allowedAloneDebug=n.indexOf("d")>-1,e())}catch(t){console.log("debug-error")}},log:function(n,t){this.allowedAloneDebug&&(t?console.debug("%c"+n,"color: "+t):console.debug(n))},overview:function(){this.log(twyne.endpoints.serving.api.completeUrl+"/impression/"+twyne.seed.impressionId+"/overview")}}}()})